{"remainingRequest":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\roemer\\Documents\\2019\\stay-manager\\src\\htmlinvoice.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\src\\htmlinvoice.vue","mtime":1577281353745},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576626834856},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\babel-loader\\lib\\index.js","mtime":1576626834590},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576626834856},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\vue-loader\\lib\\index.js","mtime":1576626847671}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQppbXBvcnQgQnVlZnkgZnJvbSAiYnVlZnkiOw0KaW1wb3J0ICJidWVmeS9kaXN0L2J1ZWZ5LmNzcyI7DQoNCmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsNCmltcG9ydCB7IG1pbnRjcmVhbSB9IGZyb20gImNvbG9yLW5hbWUiOw0KDQpWdWUudXNlKEJ1ZWZ5KTsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgdG9kYXlEYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKSwNCg0KICAgICAgc3RhdGU6IHRoaXMuJHN0b3JlLnN0YXRlDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBleHRyYUhvdXJzOiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciBhcnJpdmFsRGF0ZXRpbWUgPSBtb21lbnQodGhpcy5zdGF0ZS5zdGF5LmFycml2YWxEYXRldGltZSk7DQogICAgICB2YXIgZGVwYXJ0dXJlRGF0ZXRpbWUgPSBtb21lbnQodGhpcy5zdGF0ZS5zdGF5LmRlcGFydHVyZURhdGV0aW1lKTsNCiAgICAgIHZhciBtaW5BcnJpdmFsRGF0ZXRpbWUgPSBhcnJpdmFsRGF0ZXRpbWUuY2xvbmUoKS5zZXQoew0KICAgICAgICBob3VyOiAxNywNCiAgICAgICAgbWludXRlOiAwLA0KICAgICAgICBzZWNvbmQ6IDAsDQogICAgICAgIG1pbGxpc2Vjb25kOiAwDQogICAgICB9KTsNCiAgICAgIHZhciBtYXhEZXBhcnR1cmVEYXRldGltZSA9IGRlcGFydHVyZURhdGV0aW1lLmNsb25lKCkuc2V0KHsNCiAgICAgICAgaG91cjogMTQsDQogICAgICAgIG1pbnV0ZTogMCwNCiAgICAgICAgc2Vjb25kOiAwLA0KICAgICAgICBtaWxsaXNlY29uZDogMA0KICAgICAgfSk7DQogICAgICB2YXIgZXh0cmFIb3VycyA9IDA7DQogICAgICB2YXIgYXJyaXZhbEV4dHJhSG91cnMgPSBtaW5BcnJpdmFsRGF0ZXRpbWUuZGlmZihhcnJpdmFsRGF0ZXRpbWUsICJob3VycyIpOw0KICAgICAgdmFyIGRlcGFydHVyZUV4dHJhSG91cnMgPSBkZXBhcnR1cmVEYXRldGltZS5kaWZmKA0KICAgICAgICBtYXhEZXBhcnR1cmVEYXRldGltZSwNCiAgICAgICAgImhvdXJzIg0KICAgICAgKTsNCiAgICAgIGlmIChhcnJpdmFsRXh0cmFIb3VycyA+IDApIHsNCiAgICAgICAgZXh0cmFIb3VycyArPSBhcnJpdmFsRXh0cmFIb3VyczsNCiAgICAgIH0NCg0KICAgICAgaWYgKGRlcGFydHVyZUV4dHJhSG91cnMgPiAwKSB7DQogICAgICAgIGV4dHJhSG91cnMgKz0gZGVwYXJ0dXJlRXh0cmFIb3VyczsNCiAgICAgIH0NCiAgICAgIHJldHVybiBleHRyYUhvdXJzOw0KICAgIH0sDQogICAgc3RheVN1YnRvdGFsOiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7DQogICAgICB2YXIgaW52b2ljZURhdGEgPSB0aGlzLmludm9pY2VEYXRhOw0KDQogICAgICB2YXIgdmlsbGFUb3RhbCA9IGludm9pY2VEYXRhLnZpbGxhTmlnaHRzICogc3RhdGUucHJpY2VzLnZpbGxhTmlnaHQ7DQogICAgICB2YXIgc3RheU5pZ2h0c1RvdGFsID0gMDsNCiAgICAgIHN0YXRlLnN0YXkuc3RheU5pZ2h0QXJyYXkuZm9yRWFjaChmdW5jdGlvbihuaWdodCwgaW5kZXgpIHsNCiAgICAgICAgc3RheU5pZ2h0c1RvdGFsICs9IG5pZ2h0Lmd1ZXN0cyAqIHN0YXRlLnByaWNlcy5zdGF5TmlnaHQ7DQogICAgICB9KTsNCg0KICAgICAgdmFyIHBldHNUb3RhbCA9DQogICAgICAgIHN0YXRlLnN0YXkucGV0cyAqIGludm9pY2VEYXRhLnZpbGxhTmlnaHRzICogc3RhdGUucHJpY2VzLnBldE5pZ2h0Ow0KICAgICAgdmFyIGV4dHJhSG91cnNUb3RhbCA9IGludm9pY2VEYXRhLmV4dHJhSG91cnMgKiBzdGF0ZS5wcmljZXMuZXh0cmFIb3VyOw0KDQogICAgICByZXR1cm4gdmlsbGFUb3RhbCArIHN0YXlOaWdodHNUb3RhbCArIHBldHNUb3RhbCArIGV4dHJhSG91cnNUb3RhbDsNCiAgICB9LA0KICAgIGludm9pY2VUb3RhbDogZnVuY3Rpb24oKSB7DQogICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlOw0KICAgICAgdmFyIGludm9pY2VEYXRhID0gdGhpcy5pbnZvaWNlRGF0YTsNCg0KICAgICAgdmFyIGludm9pY2VUb3RhbCA9DQogICAgICAgIHRoaXMuc3RheVN1YnRvdGFsICogKDEgLSBpbnZvaWNlRGF0YS5kaXNjb3VudCkgKw0KICAgICAgICBpbnZvaWNlRGF0YS5jYXRlcmluZ1RvdGFsOw0KDQogICAgICBzdGF0ZS5ib29raW5nLmNvc3RzLmZvckVhY2goZnVuY3Rpb24oY29zdCwgaW5kZXgpIHsNCiAgICAgICAgY29zdC50eXBlID09PSAicGF5bWVudCINCiAgICAgICAgICA/IChpbnZvaWNlVG90YWwgLT0gY29zdC50b3RhbFByaWNlKQ0KICAgICAgICAgIDogKGludm9pY2VUb3RhbCArPSBjb3N0LnRvdGFsUHJpY2UpOw0KICAgICAgfSk7DQogICAgICByZXR1cm4gaW52b2ljZVRvdGFsOw0KICAgIH0sDQoNCiAgICBpbnZvaWNlRGF0YTogZnVuY3Rpb24oKSB7DQogICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgdmlsbGFOaWdodHM6IHN0YXRlLnN0YXkuc3RheU5pZ2h0QXJyYXkubGVuZ3RoLA0KICAgICAgICBzdGF5TmlnaHRBcnJheTogc3RhdGUuc3RheS5zdGF5TmlnaHRBcnJheSwNCiAgICAgICAgZXh0cmFIb3VyczogdGhpcy5leHRyYUhvdXJzLA0KICAgICAgICBkaXNjb3VudDogc3RhdGUuZGlzY291bnRQZXJOaWdodC5oYXNPd25Qcm9wZXJ0eSgNCiAgICAgICAgICBzdGF0ZS5zdGF5LnN0YXlOaWdodEFycmF5Lmxlbmd0aA0KICAgICAgICApDQogICAgICAgICAgPyBzdGF0ZS5kaXNjb3VudFBlck5pZ2h0W3N0YXRlLnN0YXkuc3RheU5pZ2h0QXJyYXkubGVuZ3RoXQ0KICAgICAgICAgIDogMC4xNSwNCiAgICAgICAgY2F0ZXJpbmdUb3RhbDogMA0KICAgICAgfTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBob3Vyc0RpZmZlcmVuY2U6IGZ1bmN0aW9uKHN0YXJ0RGF0ZXRpbWUsIGVuZERhdGV0aW1lKSB7DQogICAgICB2YXIgZHVyYXRpb24gPSBtb21lbnQuZHVyYXRpb24oZW5kRGF0ZXRpbWUuZGlmZihzdGFydERhdGV0aW1lKSk7DQogICAgICB2YXIgaG91cnMgPSBkdXJhdGlvbi5hc0hvdXJzKCk7DQogICAgICByZXR1cm4gaG91cnM7DQogICAgfSwNCg0KICAgIGdldERlcG9zaXRJY29uOiBmdW5jdGlvbihkZXBvc2l0VHlwZSkgew0KICAgICAgaWYgKGRlcG9zaXRUeXBlID09PSAiY2hlcXVlIikgew0KICAgICAgICByZXR1cm4gIm1vbmV5LWNoZWNrLWFsdCI7DQogICAgICB9IGVsc2UgaWYgKGRlcG9zaXRUeXBlID09PSAiY2FzaCIpIHsNCiAgICAgICAgcmV0dXJuICJtb25leS1iaWxsLXdhdmUiOw0KICAgICAgfSBlbHNlIGlmIChkZXBvc2l0VHlwZSA9PT0gInRyYW5zZmVyIikgew0KICAgICAgICByZXR1cm4gImV4Y2hhbmdlLWFsdCI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gIm1vbmV5LWNoZWNrLWFsdCI7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRTdGF0dXNDb2xvcjogZnVuY3Rpb24oYm9va2luZ1N0YXR1cykgew0KICAgICAgaWYgKGJvb2tpbmdTdGF0dXMgPT09ICJpbnF1aXJ5Iikgew0KICAgICAgICByZXR1cm4gImlzLXdhcm5pbmciOw0KICAgICAgfSBlbHNlIGlmIChib29raW5nU3RhdHVzID09PSAiY29udHJhY3QiKSB7DQogICAgICAgIHJldHVybiAiaXMtc3VjY2VzcyI7DQogICAgICB9IGVsc2UgaWYgKGJvb2tpbmdTdGF0dXMgPT09ICJjb21wbGV0ZWQiKSB7DQogICAgICAgIHJldHVybiAiaXMtc3VjY2VzcyI7DQogICAgICB9IGVsc2UgaWYgKGJvb2tpbmdTdGF0dXMgPT09ICJjYW5jZWxsZWQiKSB7DQogICAgICAgIHJldHVybiAiaXMtZGFuZ2VyIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAiaXMtZ3JleSI7DQogICAgICB9DQogICAgfSwNCiAgICBodW1hbkZvcm1hdERhdGU6IGZ1bmN0aW9uKGRhdGUpIHsNCiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJkZGQgRCBNTU0gWVlZWSIpOw0KICAgIH0sDQogICAgaHVtYW5Gb3JtYXRUaW1lOiBmdW5jdGlvbihkYXRlKSB7DQogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiSEg6bW0iKTsNCiAgICB9LA0KICAgIGh1bWFuSW52b2ljZURhdGU6IGZ1bmN0aW9uKHVuaXhEYXRlKSB7DQogICAgICByZXR1cm4gbW9tZW50LnVuaXgodW5peERhdGUpLmZvcm1hdCgiZGRkLiBEIE1NTS4iKTsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzdGF0ZSIpKSB7DQogICAgICB0aGlzLnN0YXRlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic3RhdGUiKSk7DQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["htmlinvoice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuUA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"htmlinvoice.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.2.0/css/all.css\" />\r\n\r\n    <!-- TOTAL INVOICE FLEX-->\r\n    <div class=\"A4 sheet stretchy-wrapper flex-container\">\r\n      <!-- HEADER -->\r\n      <div class=\"header\">\r\n        <!-- INVOICE HEADER -->\r\n        <div class=\"level\">\r\n          <div class=\"level-left\">\r\n            <div class=\"level-item\">\r\n              <div class=\"container\">\r\n                <h4 class=\"title is-size-4 is-uppercase\">Facture #001</h4>\r\n                <span\r\n                  :class=\"\r\n                    getStatusColor(state.booking.status) + ' is-uppercase tag'\r\n                  \"\r\n                >{{ state.booking.status }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"level-right\">\r\n            <div class=\"level-item\">\r\n              <div class=\"container is-size-7 has-text-right\">\r\n                <p>{{ todayDate }}</p>\r\n                <p>St. Germain des Bois</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- HOST AND CLIENT -->\r\n        <div class=\"container padding-10mm\">\r\n          <div class=\"card\">\r\n            <div class=\"card-content\">\r\n              <div class=\"columns is-mobile\">\r\n                <!-- HOST -->\r\n                <div class=\"column\">\r\n                  <div class=\"has-text-centered\">\r\n                    <h6 class=\"title is-6\">HÔTE</h6>\r\n                    <p>Gilberthe AKKERMANS</p>\r\n                    <p>Moulin du Merle</p>\r\n                    <p>58210 Saint-Germain-des-Bois</p>\r\n                    <p>06 77 29 83 45</p>\r\n                    <p>moulindumerle@gmail.com</p>\r\n                  </div>\r\n                </div>\r\n                <!-- HOST -->\r\n                <div class=\"column\">\r\n                  <div class=\"has-text-centered\">\r\n                    <h6 class=\"title is-6\">CLIENT</h6>\r\n                    <p>{{ state.contact.name }}</p>\r\n                    <br />\r\n                    <br />\r\n                    <p>{{ state.contact.phone }}</p>\r\n                    <p>{{ state.contact.email }}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- TOTAL INVOICE TABLE -->\r\n      <div>\r\n        <table class=\"table is-fullwidth is-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>Produit</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-if=\"staySubtotal*(1-invoiceData.discount) !== 0\">\r\n              <td>Total sejour</td>\r\n              <td>{{staySubtotal*(1-invoiceData.discount)}} €</td>\r\n            </tr>\r\n            <tr v-if=\"invoiceData.cateringTotal !== 0\">\r\n              <td>Total restauration</td>\r\n              <td>{{invoiceData.cateringTotal}} €</td>\r\n            </tr>\r\n            <tr>\r\n              <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Sous-total</td>\r\n              <td\r\n                class=\"has-text-darkgrey is-uppercase has-text-weight-bold\"\r\n              >{{staySubtotal*(1-invoiceData.discount) + invoiceData.cateringTotal}} €</td>\r\n            </tr>\r\n          </tbody>\r\n          <tbody v-for=\"cost in state.booking.costs\" :key=\"cost.id\">\r\n            <tr>\r\n              <td\r\n                :class=\"cost.type==='payment'?'has-text-success has-text-weight-semibold':''\"\r\n              >{{cost.label}}</td>\r\n              <td\r\n                :class=\"cost.type==='payment'?'has-text-success has-text-weight-semibold':''\"\r\n              >{{cost.type===\"payment\"?\"-\":\"+\"}}{{cost.totalPrice}} €</td>\r\n            </tr>\r\n          </tbody>\r\n          <tbody>\r\n            <tr>\r\n              <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Reste à payer</td>\r\n              <td\r\n                class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\"\r\n              >{{Math.round(100*invoiceTotal)/100}} €</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <p class=\"has-text-grey has-text-right\">TVA non-applicable</p>\r\n      </div>\r\n\r\n      <!-- DEPOSIT -->\r\n      <div v-if=\"state.booking.deposits.length > 0\">\r\n        <span class=\"is-size-5 title\">Caution</span>\r\n\r\n        <div\r\n          class=\"container\"\r\n          style=\"margin-bottom:1rem;\"\r\n          v-for=\"deposit in state.booking.deposits\"\r\n          :key=\"deposit.id\"\r\n        >\r\n          <article class=\"message is-light\">\r\n            <div class=\"message-header\">\r\n              <p>\r\n                <b-icon\r\n                  style=\"margin-right:0.5ch;display: inline-table;\"\r\n                  pack=\"fas\"\r\n                  :icon=\"getDepositIcon(deposit.type)\"\r\n                  size=\"is-medium\"\r\n                  type=\"is-grey\"\r\n                ></b-icon>\r\n                <span class=\"has-text-grey is-uppercase\">{{ deposit.type }} -</span>\r\n                {{ deposit.amount }} €\r\n              </p>\r\n\r\n              <span\r\n                :class=\"'tag is-medium ' + (deposit.status==='pending'?'is-warning':'is-success') \"\r\n              >\r\n                {{\r\n                deposit.dateReceived === null\r\n                ? \"\"\r\n                : deposit.dateReceived.substring(0, 10) + \", \"\r\n                }}\r\n                {{ deposit.status }}\r\n              </span>\r\n            </div>\r\n          </article>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- FOOTER -->\r\n      <div>\r\n        <!-- <p class=\"is-pulled-right\">Page 1/3</p> -->\r\n      </div>\r\n    </div>\r\n\r\n    <!-- STAY INVOICE FLEX-->\r\n    <div class=\"A4 sheet stretchy-wrapper flex-container\">\r\n      <!-- HEADER -->\r\n      <div class=\"header\">\r\n        <!-- INVOICE HEADER -->\r\n        <div class=\"level\">\r\n          <div class=\"level-left\">\r\n            <div class=\"level-item\">\r\n              <div class=\"container\">\r\n                <h4 class=\"title is-size-4 is-uppercase\">Facture #001 - DETAILS SEJOUR</h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"level-right\">\r\n            <div class=\"level-item\">\r\n              <div class=\"container is-size-7 has-text-right\">\r\n                <p>{{ todayDate }}</p>\r\n                <p>St. Germain des Bois</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- DATES -->\r\n        <div class=\"container\">\r\n          <div class=\"field is-grouped is-grouped-multiline\">\r\n            <div class=\"control\">\r\n              <div class=\"tags has-addons\">\r\n                <span class=\"tag is-dark\">Check-in</span>\r\n                <span class=\"tag is-light\">\r\n                  {{ humanFormatDate(state.stay.arrivalDatetime) }}\r\n                  <b-icon\r\n                    style=\"margin-left:0.5ch;margin-right:0.5ch;\"\r\n                    pack=\"fas\"\r\n                    icon=\"clock\"\r\n                    size=\"is-small\"\r\n                  ></b-icon>\r\n                  {{ humanFormatTime(state.stay.arrivalDatetime) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"control\">\r\n              <div class=\"tags has-addons\">\r\n                <span class=\"tag is-dark\">Check-out</span>\r\n                <span class=\"tag is-light\">\r\n                  {{ humanFormatDate(state.stay.departureDatetime) }}\r\n                  <b-icon\r\n                    style=\"margin-left:0.5ch;margin-right:0.5ch;\"\r\n                    pack=\"fas\"\r\n                    icon=\"clock\"\r\n                    size=\"is-small\"\r\n                  ></b-icon>\r\n                  {{ humanFormatTime(state.stay.departureDatetime) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <span class=\"tag is-dark\">{{ state.stay.baseGuests }} personnes</span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- PROPERTY -->\r\n        <div class=\"container padding-10mm\">\r\n          <div class=\"card\">\r\n            <div class=\"card-content\">\r\n              <div class=\"columns is-mobile\">\r\n                <!-- HOST -->\r\n                <div class=\"column\">\r\n                  <h6 class=\"title is-6\">Propriete</h6>\r\n                  <p>Villa de tourisme</p>\r\n                  <p>9 chambres</p>\r\n                  <p>3.5 salles de bains</p>\r\n                  <p>1 cuisine</p>\r\n                </div>\r\n                <div class=\"column\">\r\n                  <img src=\"./assets/mill_sketch.jpg\" />\r\n                </div>\r\n\r\n                <!-- HOST -->\r\n                <div class=\"column\">\r\n                  <div class=\"is-pulled-right\">\r\n                    <h6 class=\"title is-6\">Adresse</h6>\r\n                    <p>Moulin du Merle</p>\r\n                    <p>58210</p>\r\n                    <p>St-Germain-des-Bois</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- TOTAL INVOICE TABLE -->\r\n      <table class=\"table is-fullwidth is-bordered\">\r\n        <thead>\r\n          <tr>\r\n            <th>Produit</th>\r\n            <th>Unités</th>\r\n            <th>Prix unitaire</th>\r\n            <th>Total</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>Villa</td>\r\n            <td>{{invoiceData.villaNights}} nuit(s)</td>\r\n            <td>{{state.prices.villaNight}} €</td>\r\n            <td>{{invoiceData.villaNights*state.prices.villaNight}} €</td>\r\n          </tr>\r\n        </tbody>\r\n        <tbody v-for=\"night in state.stay.stayNightArray\" :key=\"night.id\">\r\n          <tr>\r\n            <td>Couchages {{humanInvoiceDate(night.date)}}</td>\r\n            <td>{{night.guests}}</td>\r\n            <td>{{state.prices.stayNight}} €</td>\r\n            <td>{{night.guests*state.prices.stayNight}} €</td>\r\n          </tr>\r\n        </tbody>\r\n        <tbody>\r\n          <!-- <tr>\r\n            <td>Taxe de séjour</td>\r\n            <td>40</td>\r\n            <td>1 €</td>\r\n            <td>40 €</td>\r\n          </tr>-->\r\n          <tr v-if=\"state.stay.pets>0\">\r\n            <td>Animaux de compagnie</td>\r\n            <td>{{state.stay.pets*invoiceData.villaNights}} nuit(s)</td>\r\n            <td>{{state.prices.petNight}} €</td>\r\n            <td>{{state.stay.pets*invoiceData.villaNights*state.prices.petNight}} €</td>\r\n          </tr>\r\n          <tr v-if=\"invoiceData.extraHours>0\">\r\n            <td>Heures supplémentaires</td>\r\n            <td>{{invoiceData.extraHours}}</td>\r\n            <td>{{state.prices.extraHour}} €</td>\r\n            <td>{{invoiceData.extraHours*state.prices.extraHour}} €</td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Sous-total</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">{{staySubtotal}} €</td>\r\n          </tr>\r\n          <tr v-if=\"invoiceData.discount > 0\">\r\n            <td>Réduction {{Math.round(100*invoiceData.discount)}}%</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td\r\n              class=\"has-text-success has-text-weight-semibold\"\r\n            >-{{invoiceData.discount*staySubtotal}} €</td>\r\n          </tr>\r\n          <tr class=\"is-success\">\r\n            <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Total séjour</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td\r\n              class=\"has-text-darkgrey is-uppercase has-text-weight-bold\"\r\n            >{{staySubtotal*(1-invoiceData.discount)}} €</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <!-- FOOTER -->\r\n      <div>\r\n        <!-- <p class=\"is-pulled-right\">Page 2/3</p> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport Buefy from \"buefy\";\r\nimport \"buefy/dist/buefy.css\";\r\n\r\nimport moment from \"moment\";\r\nimport { mintcream } from \"color-name\";\r\n\r\nVue.use(Buefy);\r\n\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      todayDate: new Date().toISOString().substring(0, 10),\r\n\r\n      state: this.$store.state\r\n    };\r\n  },\r\n  computed: {\r\n    extraHours: function() {\r\n      var arrivalDatetime = moment(this.state.stay.arrivalDatetime);\r\n      var departureDatetime = moment(this.state.stay.departureDatetime);\r\n      var minArrivalDatetime = arrivalDatetime.clone().set({\r\n        hour: 17,\r\n        minute: 0,\r\n        second: 0,\r\n        millisecond: 0\r\n      });\r\n      var maxDepartureDatetime = departureDatetime.clone().set({\r\n        hour: 14,\r\n        minute: 0,\r\n        second: 0,\r\n        millisecond: 0\r\n      });\r\n      var extraHours = 0;\r\n      var arrivalExtraHours = minArrivalDatetime.diff(arrivalDatetime, \"hours\");\r\n      var departureExtraHours = departureDatetime.diff(\r\n        maxDepartureDatetime,\r\n        \"hours\"\r\n      );\r\n      if (arrivalExtraHours > 0) {\r\n        extraHours += arrivalExtraHours;\r\n      }\r\n\r\n      if (departureExtraHours > 0) {\r\n        extraHours += departureExtraHours;\r\n      }\r\n      return extraHours;\r\n    },\r\n    staySubtotal: function() {\r\n      var state = this.state;\r\n      var invoiceData = this.invoiceData;\r\n\r\n      var villaTotal = invoiceData.villaNights * state.prices.villaNight;\r\n      var stayNightsTotal = 0;\r\n      state.stay.stayNightArray.forEach(function(night, index) {\r\n        stayNightsTotal += night.guests * state.prices.stayNight;\r\n      });\r\n\r\n      var petsTotal =\r\n        state.stay.pets * invoiceData.villaNights * state.prices.petNight;\r\n      var extraHoursTotal = invoiceData.extraHours * state.prices.extraHour;\r\n\r\n      return villaTotal + stayNightsTotal + petsTotal + extraHoursTotal;\r\n    },\r\n    invoiceTotal: function() {\r\n      var state = this.state;\r\n      var invoiceData = this.invoiceData;\r\n\r\n      var invoiceTotal =\r\n        this.staySubtotal * (1 - invoiceData.discount) +\r\n        invoiceData.cateringTotal;\r\n\r\n      state.booking.costs.forEach(function(cost, index) {\r\n        cost.type === \"payment\"\r\n          ? (invoiceTotal -= cost.totalPrice)\r\n          : (invoiceTotal += cost.totalPrice);\r\n      });\r\n      return invoiceTotal;\r\n    },\r\n\r\n    invoiceData: function() {\r\n      var state = this.state;\r\n      return {\r\n        villaNights: state.stay.stayNightArray.length,\r\n        stayNightArray: state.stay.stayNightArray,\r\n        extraHours: this.extraHours,\r\n        discount: state.discountPerNight.hasOwnProperty(\r\n          state.stay.stayNightArray.length\r\n        )\r\n          ? state.discountPerNight[state.stay.stayNightArray.length]\r\n          : 0.15,\r\n        cateringTotal: 0\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    hoursDifference: function(startDatetime, endDatetime) {\r\n      var duration = moment.duration(endDatetime.diff(startDatetime));\r\n      var hours = duration.asHours();\r\n      return hours;\r\n    },\r\n\r\n    getDepositIcon: function(depositType) {\r\n      if (depositType === \"cheque\") {\r\n        return \"money-check-alt\";\r\n      } else if (depositType === \"cash\") {\r\n        return \"money-bill-wave\";\r\n      } else if (depositType === \"transfer\") {\r\n        return \"exchange-alt\";\r\n      } else {\r\n        return \"money-check-alt\";\r\n      }\r\n    },\r\n    getStatusColor: function(bookingStatus) {\r\n      if (bookingStatus === \"inquiry\") {\r\n        return \"is-warning\";\r\n      } else if (bookingStatus === \"contract\") {\r\n        return \"is-success\";\r\n      } else if (bookingStatus === \"completed\") {\r\n        return \"is-success\";\r\n      } else if (bookingStatus === \"cancelled\") {\r\n        return \"is-danger\";\r\n      } else {\r\n        return \"is-grey\";\r\n      }\r\n    },\r\n    humanFormatDate: function(date) {\r\n      return moment(date).format(\"ddd D MMM YYYY\");\r\n    },\r\n    humanFormatTime: function(date) {\r\n      return moment(date).format(\"HH:mm\");\r\n    },\r\n    humanInvoiceDate: function(unixDate) {\r\n      return moment.unix(unixDate).format(\"ddd. D MMM.\");\r\n    }\r\n  },\r\n  mounted() {\r\n    if (localStorage.getItem(\"state\")) {\r\n      this.state = JSON.parse(localStorage.getItem(\"state\"));\r\n    } else {\r\n      this.state = this.$store.state;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.flex-container {\r\n  display: flex;\r\n  height: 100vh;\r\n  flex-direction: column;\r\n  flex-wrap: nowrap;\r\n  justify-content: space-between;\r\n  padding: 10mm;\r\n}\r\n.flex-container > div {\r\n  /* border: dashed grey; */\r\n}\r\n\r\n.sheet {\r\n  size: A4;\r\n  margin: 0;\r\n  overflow: hidden;\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  page-break-after: always;\r\n}\r\n\r\n/** Paper sizes **/\r\n.A4 .sheet {\r\n  width: 210mm;\r\n  height: 296mm;\r\n}\r\n.A4.landscape .sheet {\r\n  width: 297mm;\r\n  height: 209mm;\r\n}\r\n\r\n/** Padding area **/\r\n.padding-10mm {\r\n  padding: 10mm;\r\n}\r\n.padding-15mm {\r\n  padding: 15mm;\r\n}\r\n.padding-20mm {\r\n  padding: 20mm;\r\n}\r\n.padding-25mm {\r\n  padding: 25mm;\r\n}\r\n\r\n/** For screen preview **/\r\n@media screen {\r\n  .sheet {\r\n    background: white;\r\n    box-shadow: 0 0.5mm 2mm rgba(0, 0, 0, 0.3);\r\n    margin: 5mm auto;\r\n    transform: scale(1);\r\n  }\r\n  .stretchy-wrapper {\r\n    width: 100%;\r\n    padding-bottom: 141.4%; /* A4 */\r\n    position: relative;\r\n    background: white;\r\n  }\r\n  .stretchy-wrapper > div {\r\n    position: relative;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n  }\r\n}\r\n\r\n* {\r\n  -webkit-print-color-adjust: exact;\r\n}\r\n\r\n@media print {\r\n  .A4.landscape {\r\n    width: 297mm;\r\n  }\r\n  .A4 {\r\n    width: 210mm;\r\n  }\r\n}\r\n\r\n@page {\r\n  margin: 0;\r\n  size: A4;\r\n}\r\n</style>\r\n"]}]}