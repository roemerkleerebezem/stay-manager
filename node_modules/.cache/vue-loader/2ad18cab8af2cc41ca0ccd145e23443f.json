{"remainingRequest":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\roemer\\Documents\\2019\\stay-manager\\src\\htmlinvoice.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\src\\htmlinvoice.vue","mtime":1576949275026},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576626834856},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\babel-loader\\lib\\index.js","mtime":1576626834590},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576626834856},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\vue-loader\\lib\\index.js","mtime":1576626847671}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IEJ1ZWZ5IGZyb20gImJ1ZWZ5IjsKaW1wb3J0ICJidWVmeS9kaXN0L2J1ZWZ5LmNzcyI7CgppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IG1pbnRjcmVhbSB9IGZyb20gImNvbG9yLW5hbWUiOwoKVnVlLnVzZShCdWVmeSk7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICB0b2RheURhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApLAoKICAgICAgc3RhdGU6IHRoaXMuJHN0b3JlLnN0YXRlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGV4dHJhSG91cnM6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgYXJyaXZhbERhdGV0aW1lID0gbW9tZW50KHRoaXMuc3RhdGUuc3RheS5hcnJpdmFsRGF0ZXRpbWUpOwogICAgICB2YXIgZGVwYXJ0dXJlRGF0ZXRpbWUgPSBtb21lbnQodGhpcy5zdGF0ZS5zdGF5LmRlcGFydHVyZURhdGV0aW1lKTsKICAgICAgdmFyIG1pbkFycml2YWxEYXRldGltZSA9IGFycml2YWxEYXRldGltZS5jbG9uZSgpLnNldCh7CiAgICAgICAgaG91cjogMTcsCiAgICAgICAgbWludXRlOiAwLAogICAgICAgIHNlY29uZDogMCwKICAgICAgICBtaWxsaXNlY29uZDogMAogICAgICB9KTsKICAgICAgdmFyIG1heERlcGFydHVyZURhdGV0aW1lID0gZGVwYXJ0dXJlRGF0ZXRpbWUuY2xvbmUoKS5zZXQoewogICAgICAgIGhvdXI6IDE0LAogICAgICAgIG1pbnV0ZTogMCwKICAgICAgICBzZWNvbmQ6IDAsCiAgICAgICAgbWlsbGlzZWNvbmQ6IDAKICAgICAgfSk7CiAgICAgIHZhciBleHRyYUhvdXJzID0gMDsKICAgICAgdmFyIGFycml2YWxFeHRyYUhvdXJzID0gbWluQXJyaXZhbERhdGV0aW1lLmRpZmYoYXJyaXZhbERhdGV0aW1lLCAiaG91cnMiKTsKICAgICAgdmFyIGRlcGFydHVyZUV4dHJhSG91cnMgPSBkZXBhcnR1cmVEYXRldGltZS5kaWZmKAogICAgICAgIG1heERlcGFydHVyZURhdGV0aW1lLAogICAgICAgICJob3VycyIKICAgICAgKTsKICAgICAgaWYgKGFycml2YWxFeHRyYUhvdXJzID4gMCkgewogICAgICAgIGV4dHJhSG91cnMgKz0gYXJyaXZhbEV4dHJhSG91cnM7CiAgICAgIH0KCiAgICAgIGlmIChkZXBhcnR1cmVFeHRyYUhvdXJzID4gMCkgewogICAgICAgIGV4dHJhSG91cnMgKz0gZGVwYXJ0dXJlRXh0cmFIb3VyczsKICAgICAgfQogICAgICByZXR1cm4gZXh0cmFIb3VyczsKICAgIH0sCiAgICBzdGF5U3VidG90YWw6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlOwogICAgICB2YXIgaW52b2ljZURhdGEgPSB0aGlzLmludm9pY2VEYXRhOwoKICAgICAgdmFyIHZpbGxhVG90YWwgPSBpbnZvaWNlRGF0YS52aWxsYU5pZ2h0cyAqIHN0YXRlLnByaWNlcy52aWxsYU5pZ2h0OwogICAgICB2YXIgc3RheU5pZ2h0c1RvdGFsID0gMDsKICAgICAgc3RhdGUuc3RheS5zdGF5TmlnaHRBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKG5pZ2h0LCBpbmRleCkgewogICAgICAgIHN0YXlOaWdodHNUb3RhbCArPSBuaWdodC5ndWVzdHMgKiBzdGF0ZS5wcmljZXMuc3RheU5pZ2h0OwogICAgICB9KTsKCiAgICAgIHZhciBwZXRzVG90YWwgPQogICAgICAgIHN0YXRlLnN0YXkucGV0cyAqIGludm9pY2VEYXRhLnZpbGxhTmlnaHRzICogc3RhdGUucHJpY2VzLnBldE5pZ2h0OwogICAgICB2YXIgZXh0cmFIb3Vyc1RvdGFsID0gaW52b2ljZURhdGEuZXh0cmFIb3VycyAqIHN0YXRlLnByaWNlcy5leHRyYUhvdXI7CgogICAgICByZXR1cm4gdmlsbGFUb3RhbCArIHN0YXlOaWdodHNUb3RhbCArIHBldHNUb3RhbCArIGV4dHJhSG91cnNUb3RhbDsKICAgIH0sCiAgICBpbnZvaWNlVG90YWw6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlOwogICAgICB2YXIgaW52b2ljZURhdGEgPSB0aGlzLmludm9pY2VEYXRhOwoKICAgICAgdmFyIGludm9pY2VUb3RhbCA9CiAgICAgICAgdGhpcy5zdGF5U3VidG90YWwgKiAoMSAtIGludm9pY2VEYXRhLmRpc2NvdW50KSArCiAgICAgICAgaW52b2ljZURhdGEuY2F0ZXJpbmdUb3RhbDsKCiAgICAgIHN0YXRlLmJvb2tpbmcuY29zdHMuZm9yRWFjaChmdW5jdGlvbihjb3N0LCBpbmRleCkgewogICAgICAgIGNvc3QudHlwZSA9PT0gInBheW1lbnQiCiAgICAgICAgICA/IChpbnZvaWNlVG90YWwgLT0gY29zdC50b3RhbFByaWNlKQogICAgICAgICAgOiAoaW52b2ljZVRvdGFsICs9IGNvc3QudG90YWxQcmljZSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gaW52b2ljZVRvdGFsOwogICAgfSwKCiAgICBpbnZvaWNlRGF0YTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmlsbGFOaWdodHM6IHN0YXRlLnN0YXkuc3RheU5pZ2h0QXJyYXkubGVuZ3RoLAogICAgICAgIHN0YXlOaWdodEFycmF5OiBzdGF0ZS5zdGF5LnN0YXlOaWdodEFycmF5LAogICAgICAgIGV4dHJhSG91cnM6IHRoaXMuZXh0cmFIb3VycywKICAgICAgICBkaXNjb3VudDogc3RhdGUuZGlzY291bnRQZXJOaWdodC5oYXNPd25Qcm9wZXJ0eSgKICAgICAgICAgIHN0YXRlLnN0YXkuc3RheU5pZ2h0QXJyYXkubGVuZ3RoCiAgICAgICAgKQogICAgICAgICAgPyBzdGF0ZS5kaXNjb3VudFBlck5pZ2h0W3N0YXRlLnN0YXkuc3RheU5pZ2h0QXJyYXkubGVuZ3RoXQogICAgICAgICAgOiAwLjE1LAogICAgICAgIGNhdGVyaW5nVG90YWw6IDAKICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhvdXJzRGlmZmVyZW5jZTogZnVuY3Rpb24oc3RhcnREYXRldGltZSwgZW5kRGF0ZXRpbWUpIHsKICAgICAgdmFyIGR1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKGVuZERhdGV0aW1lLmRpZmYoc3RhcnREYXRldGltZSkpOwogICAgICB2YXIgaG91cnMgPSBkdXJhdGlvbi5hc0hvdXJzKCk7CiAgICAgIHJldHVybiBob3VyczsKICAgIH0sCgogICAgZ2V0RGVwb3NpdEljb246IGZ1bmN0aW9uKGRlcG9zaXRUeXBlKSB7CiAgICAgIGlmIChkZXBvc2l0VHlwZSA9PT0gImNoZXF1ZSIpIHsKICAgICAgICByZXR1cm4gIm1vbmV5LWNoZWNrLWFsdCI7CiAgICAgIH0gZWxzZSBpZiAoZGVwb3NpdFR5cGUgPT09ICJjYXNoIikgewogICAgICAgIHJldHVybiAibW9uZXktYmlsbC13YXZlIjsKICAgICAgfSBlbHNlIGlmIChkZXBvc2l0VHlwZSA9PT0gInRyYW5zZmVyIikgewogICAgICAgIHJldHVybiAiZXhjaGFuZ2UtYWx0IjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIm1vbmV5LWNoZWNrLWFsdCI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRTdGF0dXNDb2xvcjogZnVuY3Rpb24oYm9va2luZ1N0YXR1cykgewogICAgICBpZiAoYm9va2luZ1N0YXR1cyA9PT0gImlucXVpcnkiKSB7CiAgICAgICAgcmV0dXJuICJpcy13YXJuaW5nIjsKICAgICAgfSBlbHNlIGlmIChib29raW5nU3RhdHVzID09PSAiY29udHJhY3QiKSB7CiAgICAgICAgcmV0dXJuICJpcy1zdWNjZXNzIjsKICAgICAgfSBlbHNlIGlmIChib29raW5nU3RhdHVzID09PSAiY29tcGxldGVkIikgewogICAgICAgIHJldHVybiAiaXMtc3VjY2VzcyI7CiAgICAgIH0gZWxzZSBpZiAoYm9va2luZ1N0YXR1cyA9PT0gImNhbmNlbGxlZCIpIHsKICAgICAgICByZXR1cm4gImlzLWRhbmdlciI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJpcy1ncmV5IjsKICAgICAgfQogICAgfSwKICAgIGh1bWFuRm9ybWF0RGF0ZTogZnVuY3Rpb24oZGF0ZSkgewogICAgICByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCgiZGRkIEQgTU1NIFlZWVkiKTsKICAgIH0sCiAgICBodW1hbkZvcm1hdFRpbWU6IGZ1bmN0aW9uKGRhdGUpIHsKICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoIkhIOm1tIik7CiAgICB9LAogICAgaHVtYW5JbnZvaWNlRGF0ZTogZnVuY3Rpb24odW5peERhdGUpIHsKICAgICAgcmV0dXJuIG1vbWVudC51bml4KHVuaXhEYXRlKS5mb3JtYXQoImRkZC4gRCBNTU0uIik7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzdGF0ZSIpKSB7CiAgICAgIHRoaXMuc3RhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzdGF0ZSIpKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["htmlinvoice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuUA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"htmlinvoice.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.2.0/css/all.css\" />\n\n    <!-- TOTAL INVOICE FLEX-->\n    <div class=\"A4 sheet stretchy-wrapper flex-container\">\n      <!-- HEADER -->\n      <div class=\"header\">\n        <!-- INVOICE HEADER -->\n        <div class=\"level\">\n          <div class=\"level-left\">\n            <div class=\"level-item\">\n              <div class=\"container\">\n                <h4 class=\"title is-size-4 is-uppercase\">Facture #001</h4>\n                <span\n                  :class=\"\n                    getStatusColor(state.booking.status) + ' is-uppercase tag'\n                  \"\n                >{{ state.booking.status }}</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"level-right\">\n            <div class=\"level-item\">\n              <div class=\"container is-size-7 has-text-right\">\n                <p>{{ todayDate }}</p>\n                <p>St. Germain des Bois</p>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- HOST AND CLIENT -->\n        <div class=\"container padding-10mm\">\n          <div class=\"card\">\n            <div class=\"card-content\">\n              <div class=\"columns is-mobile\">\n                <!-- HOST -->\n                <div class=\"column\">\n                  <div class=\"has-text-centered\">\n                    <h6 class=\"title is-6\">HÔTE</h6>\n                    <p>Gilberthe AKKERMANS</p>\n                    <p>Moulin du Merle</p>\n                    <p>58210 Saint-Germain-des-Bois</p>\n                    <p>06 77 29 83 45</p>\n                    <p>moulindumerle@gmail.com</p>\n                  </div>\n                </div>\n                <!-- HOST -->\n                <div class=\"column\">\n                  <div class=\"has-text-centered\">\n                    <h6 class=\"title is-6\">CLIENT</h6>\n                    <p>{{ state.contact.name }}</p>\n                    <br />\n                    <br />\n                    <p>{{ state.contact.phone }}</p>\n                    <p>{{ state.contact.email }}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- TOTAL INVOICE TABLE -->\n      <div>\n        <table class=\"table is-fullwidth is-bordered\">\n          <thead>\n            <tr>\n              <th>Produit</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-if=\"staySubtotal*(1-invoiceData.discount) !== 0\">\n              <td>Total sejour</td>\n              <td>{{staySubtotal*(1-invoiceData.discount)}} €</td>\n            </tr>\n            <tr v-if=\"invoiceData.cateringTotal !== 0\">\n              <td>Total restauration</td>\n              <td>{{invoiceData.cateringTotal}} €</td>\n            </tr>\n            <tr>\n              <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Sous-total</td>\n              <td\n                class=\"has-text-darkgrey is-uppercase has-text-weight-bold\"\n              >{{staySubtotal*(1-invoiceData.discount) + invoiceData.cateringTotal}} €</td>\n            </tr>\n          </tbody>\n          <tbody v-for=\"cost in state.booking.costs\" :key=\"cost.id\">\n            <tr>\n              <td\n                :class=\"cost.type==='payment'?'has-text-success has-text-weight-semibold':''\"\n              >{{cost.label}}</td>\n              <td\n                :class=\"cost.type==='payment'?'has-text-success has-text-weight-semibold':''\"\n              >{{cost.type===\"payment\"?\"-\":\"+\"}}{{cost.totalPrice}} €</td>\n            </tr>\n          </tbody>\n          <tbody>\n            <tr>\n              <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Reste à payer</td>\n              <td\n                class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\"\n              >{{Math.round(100*invoiceTotal)/100}} €</td>\n            </tr>\n          </tbody>\n        </table>\n        <p class=\"has-text-grey has-text-right\">TVA non-applicable</p>\n      </div>\n\n      <!-- DEPOSIT -->\n      <div v-if=\"state.booking.deposits.length > 0\">\n        <span class=\"is-size-5 title\">Caution</span>\n\n        <div\n          class=\"container\"\n          style=\"margin-bottom:1rem;\"\n          v-for=\"deposit in state.booking.deposits\"\n          :key=\"deposit.id\"\n        >\n          <article class=\"message is-light\">\n            <div class=\"message-header\">\n              <p>\n                <b-icon\n                  style=\"margin-right:0.5ch;display: inline-table;\"\n                  pack=\"fas\"\n                  :icon=\"getDepositIcon(deposit.type)\"\n                  size=\"is-medium\"\n                  type=\"is-grey\"\n                ></b-icon>\n                <span class=\"has-text-grey is-uppercase\">{{ deposit.type }} -</span>\n                {{ deposit.amount }} €\n              </p>\n\n              <span\n                :class=\"'tag is-medium ' + (deposit.status==='pending'?'is-warning':'is-success') \"\n              >\n                {{\n                deposit.dateReceived === null\n                ? \"\"\n                : deposit.dateReceived.substring(0, 10) + \", \"\n                }}\n                {{ deposit.status }}\n              </span>\n            </div>\n          </article>\n        </div>\n      </div>\n\n      <!-- FOOTER -->\n      <div>\n        <!-- <p class=\"is-pulled-right\">Page 1/3</p> -->\n      </div>\n    </div>\n\n    <!-- STAY INVOICE FLEX-->\n    <div class=\"A4 sheet stretchy-wrapper flex-container\">\n      <!-- HEADER -->\n      <div class=\"header\">\n        <!-- INVOICE HEADER -->\n        <div class=\"level\">\n          <div class=\"level-left\">\n            <div class=\"level-item\">\n              <div class=\"container\">\n                <h4 class=\"title is-size-4 is-uppercase\">Facture #001 - DETAILS SEJOUR</h4>\n              </div>\n            </div>\n          </div>\n          <div class=\"level-right\">\n            <div class=\"level-item\">\n              <div class=\"container is-size-7 has-text-right\">\n                <p>{{ todayDate }}</p>\n                <p>St. Germain des Bois</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- DATES -->\n        <div class=\"container\">\n          <div class=\"field is-grouped is-grouped-multiline\">\n            <div class=\"control\">\n              <div class=\"tags has-addons\">\n                <span class=\"tag is-dark\">Check-in</span>\n                <span class=\"tag is-light\">\n                  {{ humanFormatDate(state.stay.arrivalDatetime) }}\n                  <b-icon\n                    style=\"margin-left:0.5ch;margin-right:0.5ch;\"\n                    pack=\"fas\"\n                    icon=\"clock\"\n                    size=\"is-small\"\n                  ></b-icon>\n                  {{ humanFormatTime(state.stay.arrivalDatetime) }}\n                </span>\n              </div>\n            </div>\n            <div class=\"control\">\n              <div class=\"tags has-addons\">\n                <span class=\"tag is-dark\">Check-out</span>\n                <span class=\"tag is-light\">\n                  {{ humanFormatDate(state.stay.departureDatetime) }}\n                  <b-icon\n                    style=\"margin-left:0.5ch;margin-right:0.5ch;\"\n                    pack=\"fas\"\n                    icon=\"clock\"\n                    size=\"is-small\"\n                  ></b-icon>\n                  {{ humanFormatTime(state.stay.departureDatetime) }}\n                </span>\n              </div>\n            </div>\n            <span class=\"tag is-dark\">{{ state.stay.baseGuests }} personnes</span>\n          </div>\n        </div>\n\n        <!-- PROPERTY -->\n        <div class=\"container padding-10mm\">\n          <div class=\"card\">\n            <div class=\"card-content\">\n              <div class=\"columns is-mobile\">\n                <!-- HOST -->\n                <div class=\"column\">\n                  <h6 class=\"title is-6\">Propriete</h6>\n                  <p>Villa de tourisme</p>\n                  <p>9 chambres</p>\n                  <p>3.5 salles de bains</p>\n                  <p>1 cuisine</p>\n                </div>\n                <div class=\"column\">\n                  <img src=\"./assets/mill_sketch.jpg\" />\n                </div>\n\n                <!-- HOST -->\n                <div class=\"column\">\n                  <div class=\"is-pulled-right\">\n                    <h6 class=\"title is-6\">Adresse</h6>\n                    <p>Moulin du Merle</p>\n                    <p>58210</p>\n                    <p>St-Germain-des-Bois</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- TOTAL INVOICE TABLE -->\n      <table class=\"table is-fullwidth is-bordered\">\n        <thead>\n          <tr>\n            <th>Produit</th>\n            <th>Unités</th>\n            <th>Prix unitaire</th>\n            <th>Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>Villa</td>\n            <td>{{invoiceData.villaNights}} nuit(s)</td>\n            <td>{{state.prices.villaNight}} €</td>\n            <td>{{invoiceData.villaNights*state.prices.villaNight}} €</td>\n          </tr>\n        </tbody>\n        <tbody v-for=\"night in state.stay.stayNightArray\" :key=\"night.id\">\n          <tr>\n            <td>Couchages {{humanInvoiceDate(night.date)}}</td>\n            <td>{{night.guests}}</td>\n            <td>{{state.prices.stayNight}} €</td>\n            <td>{{night.guests*state.prices.stayNight}} €</td>\n          </tr>\n        </tbody>\n        <tbody>\n          <!-- <tr>\n            <td>Taxe de séjour</td>\n            <td>40</td>\n            <td>1 €</td>\n            <td>40 €</td>\n          </tr>-->\n          <tr v-if=\"state.stay.pets>0\">\n            <td>Animaux de compagnie</td>\n            <td>{{state.stay.pets*invoiceData.villaNights}} nuit(s)</td>\n            <td>{{state.prices.petNight}} €</td>\n            <td>{{state.stay.pets*invoiceData.villaNights*state.prices.petNight}} €</td>\n          </tr>\n          <tr v-if=\"invoiceData.extraHours>0\">\n            <td>Heures supplémentaires</td>\n            <td>{{invoiceData.extraHours}}</td>\n            <td>{{state.prices.extraHour}} €</td>\n            <td>{{invoiceData.extraHours*state.prices.extraHour}} €</td>\n          </tr>\n          <tr>\n            <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Sous-total</td>\n            <td></td>\n            <td></td>\n            <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">{{staySubtotal}} €</td>\n          </tr>\n          <tr v-if=\"invoiceData.discount > 0\">\n            <td>Réduction {{Math.round(100*invoiceData.discount)}}%</td>\n            <td></td>\n            <td></td>\n            <td\n              class=\"has-text-success has-text-weight-semibold\"\n            >-{{invoiceData.discount*staySubtotal}} €</td>\n          </tr>\n          <tr class=\"is-success\">\n            <td class=\"has-text-darkgrey is-uppercase has-text-weight-semibold\">Total séjour</td>\n            <td></td>\n            <td></td>\n            <td\n              class=\"has-text-darkgrey is-uppercase has-text-weight-bold\"\n            >{{staySubtotal*(1-invoiceData.discount)}} €</td>\n          </tr>\n        </tbody>\n      </table>\n\n      <!-- FOOTER -->\n      <div>\n        <!-- <p class=\"is-pulled-right\">Page 2/3</p> -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\n\nimport moment from \"moment\";\nimport { mintcream } from \"color-name\";\n\nVue.use(Buefy);\n\nexport default {\n  data: function() {\n    return {\n      todayDate: new Date().toISOString().substring(0, 10),\n\n      state: this.$store.state\n    };\n  },\n  computed: {\n    extraHours: function() {\n      var arrivalDatetime = moment(this.state.stay.arrivalDatetime);\n      var departureDatetime = moment(this.state.stay.departureDatetime);\n      var minArrivalDatetime = arrivalDatetime.clone().set({\n        hour: 17,\n        minute: 0,\n        second: 0,\n        millisecond: 0\n      });\n      var maxDepartureDatetime = departureDatetime.clone().set({\n        hour: 14,\n        minute: 0,\n        second: 0,\n        millisecond: 0\n      });\n      var extraHours = 0;\n      var arrivalExtraHours = minArrivalDatetime.diff(arrivalDatetime, \"hours\");\n      var departureExtraHours = departureDatetime.diff(\n        maxDepartureDatetime,\n        \"hours\"\n      );\n      if (arrivalExtraHours > 0) {\n        extraHours += arrivalExtraHours;\n      }\n\n      if (departureExtraHours > 0) {\n        extraHours += departureExtraHours;\n      }\n      return extraHours;\n    },\n    staySubtotal: function() {\n      var state = this.state;\n      var invoiceData = this.invoiceData;\n\n      var villaTotal = invoiceData.villaNights * state.prices.villaNight;\n      var stayNightsTotal = 0;\n      state.stay.stayNightArray.forEach(function(night, index) {\n        stayNightsTotal += night.guests * state.prices.stayNight;\n      });\n\n      var petsTotal =\n        state.stay.pets * invoiceData.villaNights * state.prices.petNight;\n      var extraHoursTotal = invoiceData.extraHours * state.prices.extraHour;\n\n      return villaTotal + stayNightsTotal + petsTotal + extraHoursTotal;\n    },\n    invoiceTotal: function() {\n      var state = this.state;\n      var invoiceData = this.invoiceData;\n\n      var invoiceTotal =\n        this.staySubtotal * (1 - invoiceData.discount) +\n        invoiceData.cateringTotal;\n\n      state.booking.costs.forEach(function(cost, index) {\n        cost.type === \"payment\"\n          ? (invoiceTotal -= cost.totalPrice)\n          : (invoiceTotal += cost.totalPrice);\n      });\n      return invoiceTotal;\n    },\n\n    invoiceData: function() {\n      var state = this.state;\n      return {\n        villaNights: state.stay.stayNightArray.length,\n        stayNightArray: state.stay.stayNightArray,\n        extraHours: this.extraHours,\n        discount: state.discountPerNight.hasOwnProperty(\n          state.stay.stayNightArray.length\n        )\n          ? state.discountPerNight[state.stay.stayNightArray.length]\n          : 0.15,\n        cateringTotal: 0\n      };\n    }\n  },\n  methods: {\n    hoursDifference: function(startDatetime, endDatetime) {\n      var duration = moment.duration(endDatetime.diff(startDatetime));\n      var hours = duration.asHours();\n      return hours;\n    },\n\n    getDepositIcon: function(depositType) {\n      if (depositType === \"cheque\") {\n        return \"money-check-alt\";\n      } else if (depositType === \"cash\") {\n        return \"money-bill-wave\";\n      } else if (depositType === \"transfer\") {\n        return \"exchange-alt\";\n      } else {\n        return \"money-check-alt\";\n      }\n    },\n    getStatusColor: function(bookingStatus) {\n      if (bookingStatus === \"inquiry\") {\n        return \"is-warning\";\n      } else if (bookingStatus === \"contract\") {\n        return \"is-success\";\n      } else if (bookingStatus === \"completed\") {\n        return \"is-success\";\n      } else if (bookingStatus === \"cancelled\") {\n        return \"is-danger\";\n      } else {\n        return \"is-grey\";\n      }\n    },\n    humanFormatDate: function(date) {\n      return moment(date).format(\"ddd D MMM YYYY\");\n    },\n    humanFormatTime: function(date) {\n      return moment(date).format(\"HH:mm\");\n    },\n    humanInvoiceDate: function(unixDate) {\n      return moment.unix(unixDate).format(\"ddd. D MMM.\");\n    }\n  },\n  mounted() {\n    if (localStorage.getItem(\"state\")) {\n      this.state = JSON.parse(localStorage.getItem(\"state\"));\n    } else {\n      this.state = this.$store.state;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.flex-container {\n  display: flex;\n  height: 100vh;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  padding: 10mm;\n}\n.flex-container > div {\n  /* border: dashed grey; */\n}\n\n.sheet {\n  size: A4;\n  margin: 0;\n  overflow: hidden;\n  position: relative;\n  box-sizing: border-box;\n  page-break-after: always;\n}\n\n/** Paper sizes **/\n.A4 .sheet {\n  width: 210mm;\n  height: 296mm;\n}\n.A4.landscape .sheet {\n  width: 297mm;\n  height: 209mm;\n}\n\n/** Padding area **/\n.padding-10mm {\n  padding: 10mm;\n}\n.padding-15mm {\n  padding: 15mm;\n}\n.padding-20mm {\n  padding: 20mm;\n}\n.padding-25mm {\n  padding: 25mm;\n}\n\n/** For screen preview **/\n@media screen {\n  .sheet {\n    background: white;\n    box-shadow: 0 0.5mm 2mm rgba(0, 0, 0, 0.3);\n    margin: 5mm auto;\n    transform: scale(1);\n  }\n  .stretchy-wrapper {\n    width: 100%;\n    padding-bottom: 141.4%; /* A4 */\n    position: relative;\n    background: white;\n  }\n  .stretchy-wrapper > div {\n    position: relative;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n}\n\n* {\n  -webkit-print-color-adjust: exact;\n}\n\n@media print {\n  .A4.landscape {\n    width: 297mm;\n  }\n  .A4 {\n    width: 210mm;\n  }\n}\n\n@page {\n  margin: 0;\n  size: A4;\n}\n</style>\n"]}]}