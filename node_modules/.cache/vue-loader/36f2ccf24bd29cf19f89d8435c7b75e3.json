{"remainingRequest":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\roemer\\Documents\\2019\\stay-manager\\src\\tabs\\invoice-tab.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\src\\tabs\\invoice-tab.vue","mtime":1577281353747},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576626834856},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\babel-loader\\lib\\index.js","mtime":1576626834590},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576626834856},{"path":"C:\\Users\\roemer\\Documents\\2019\\stay-manager\\node_modules\\vue-loader\\lib\\index.js","mtime":1576626847671}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQppbXBvcnQgaHRtbGludm9pY2UgZnJvbSAiLi4vaHRtbGludm9pY2UudnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7IGh0bWxpbnZvaWNlIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNDb21wb25lbnRNb2RhbEFjdGl2ZTogZmFsc2UsDQogICAgICBib29raW5nOiB0aGlzLiRzdG9yZS5zdGF0ZS5ib29raW5nLA0KICAgICAgdGVtcERlcG9zaXQ6IHsNCiAgICAgICAgaWQ6IG51bGwsDQogICAgICAgIHN0YXR1czogbnVsbCwNCiAgICAgICAgdHlwZTogbnVsbCwNCiAgICAgICAgYW1vdW50OiBudWxsLA0KICAgICAgICBkYXRlUmVjZWl2ZWQ6IG51bGwNCiAgICAgIH0sDQogICAgICB0ZW1wQ29zdDogew0KICAgICAgICBpZDogbnVsbCwNCiAgICAgICAgdHlwZTogbnVsbCwNCiAgICAgICAgbGFiZWw6IG51bGwsDQogICAgICAgIHVuaXRzOiBudWxsLA0KICAgICAgICB1bml0UHJpY2U6IG51bGwsDQogICAgICAgIHRvdGFsUHJpY2U6IG51bGwNCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDoge30sDQogIHdhdGNoOiB7fSwNCg0KICBtZXRob2RzOiB7DQogICAgZ2V0SWQ6IGZ1bmN0aW9uKG9iamVjdCkgew0KICAgICAgdmFyIGFyciA9IFtdOw0KICAgICAgZm9yICh2YXIgb2JqIGluIG9iamVjdCkgew0KICAgICAgICBhcnIucHVzaChwYXJzZUludChvYmopKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBNYXRoLm1heCgtMSwgLi4uYXJyKSArIDE7DQogICAgfSwNCiAgICBvcGVuTW9kYWwoKSB7DQogICAgICB0aGlzLiRidWVmeS5tb2RhbC5vcGVuKHsNCiAgICAgICAgcGFyZW50OiB0aGlzLA0KICAgICAgICBjb21wb25lbnQ6IGh0bWxJbnZvaWNlLA0KICAgICAgICBoYXNNb2RhbENhcmQ6IGZhbHNlDQogICAgICB9KTsNCiAgICB9LA0KICAgIGFkZERlcG9zaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIHRlbXBEZXBvc2l0ID0gdGhpcy50ZW1wRGVwb3NpdDsNCiAgICAgIHZhciB0ZW1wRGVwb3NpdHMgPSB0aGlzLmJvb2tpbmcuZGVwb3NpdHM7DQogICAgICB0ZW1wRGVwb3NpdC5pZCA9IHRoaXMuZ2V0SWQodGVtcERlcG9zaXRzKTsNCiAgICAgIHRlbXBEZXBvc2l0cy5wdXNoKHRlbXBEZXBvc2l0KTsNCg0KICAgICAgVnVlLnNldCgNCiAgICAgICAgdGhpcy5ib29raW5nLA0KICAgICAgICAiZGVwb3NpdHMiLA0KICAgICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbXBEZXBvc2l0cykpDQogICAgICApOw0KICAgICAgdGhpcy50ZW1wRGVwb3NpdCA9IHsNCiAgICAgICAgaWQ6IG51bGwsDQogICAgICAgIHN0YXR1czogbnVsbCwNCiAgICAgICAgdHlwZTogbnVsbCwNCiAgICAgICAgYW1vdW50OiBudWxsLA0KICAgICAgICBkYXRlUmVjZWl2ZWQ6IG51bGwNCiAgICAgIH07DQogICAgfSwNCg0KICAgIHByaW50SW52b2ljZSgpIHsNCiAgICAgIHZhciBwcmludFdpbmRvdyA9IHdpbmRvdy5vcGVuKCIuL2h0bWxpbnZvaWNlIik7DQogICAgICBwcmludFdpbmRvdy5mb2N1cygpOw0KICAgICAgcHJpbnRXaW5kb3cucHJpbnQoKTsNCiAgICB9LA0KDQogICAgYWRkQ29zdDogZnVuY3Rpb24oKSB7DQogICAgICB2YXIgdGVtcENvc3QgPSB0aGlzLnRlbXBDb3N0Ow0KICAgICAgdmFyIHRlbXBDb3N0cyA9IHRoaXMuYm9va2luZy5jb3N0czsNCiAgICAgIHRlbXBDb3N0LmlkID0gdGhpcy5nZXRJZCh0ZW1wQ29zdHMpOw0KICAgICAgdGVtcENvc3RzLnB1c2godGVtcENvc3QpOw0KDQogICAgICBWdWUuc2V0KHRoaXMuYm9va2luZywgImNvc3RzIiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZW1wQ29zdHMpKSk7DQogICAgICB0aGlzLnRlbXBDb3N0ID0gew0KICAgICAgICBpZDogbnVsbCwNCiAgICAgICAgdHlwZTogbnVsbCwNCiAgICAgICAgbGFiZWw6IG51bGwsDQogICAgICAgIHVuaXRzOiBudWxsLA0KICAgICAgICB1bml0UHJpY2U6IG51bGwsDQogICAgICAgIHRvdGFsUHJpY2U6IG51bGwNCiAgICAgIH07DQogICAgfSwNCiAgICBnZXREZXBvc2l0SWNvbjogZnVuY3Rpb24oZGVwb3NpdFR5cGUpIHsNCiAgICAgIGlmIChkZXBvc2l0VHlwZSA9PT0gImNoZXF1ZSIpIHsNCiAgICAgICAgcmV0dXJuICJtb25leS1jaGVjay1hbHQiOw0KICAgICAgfSBlbHNlIGlmIChkZXBvc2l0VHlwZSA9PT0gImNhc2giKSB7DQogICAgICAgIHJldHVybiAibW9uZXktYmlsbC13YXZlIjsNCiAgICAgIH0gZWxzZSBpZiAoZGVwb3NpdFR5cGUgPT09ICJ0cmFuc2ZlciIpIHsNCiAgICAgICAgcmV0dXJuICJleGNoYW5nZS1hbHQiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuICJtb25leS1jaGVjay1hbHQiOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["invoice-tab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"invoice-tab.vue","sourceRoot":"src/tabs","sourcesContent":["<template>\r\n  <!-- FORM -->\r\n  <section class=\"section\" style=\"height:100%\">\r\n    <div class=\"container\">\r\n      <div class=\"box\">\r\n        <!-- FORM TITLE -->\r\n        <h3 class=\"title is-3\">Facture</h3>\r\n        <!-- DEPOSITS -->\r\n        <label class=\"label\">Caution</label>\r\n\r\n        <!-- DEPOSIT LIST -->\r\n        <div\r\n          class=\"container\"\r\n          style=\"margin-bottom:1rem;\"\r\n          v-for=\"deposit in booking.deposits\"\r\n          :key=\"deposit.id\"\r\n        >\r\n          <article class=\"message is-light\">\r\n            <div class=\"message-header\">\r\n              <p>\r\n                <b-icon\r\n                  style=\"margin-right:0.5ch;display: inline-table;\"\r\n                  pack=\"fas\"\r\n                  :icon=\"getDepositIcon(deposit.type)\"\r\n                  size=\"is-medium\"\r\n                  type=\"is-grey\"\r\n                ></b-icon>\r\n                <span class=\"has-text-grey\">{{ deposit.type }} -</span>\r\n                {{ deposit.amount }} euros\r\n              </p>\r\n              <span\r\n                :class=\"\r\n                  'tag is-medium ' +\r\n                    (deposit.status === 'pending' ? 'is-warning' : 'is-success')\r\n                \"\r\n              >\r\n                {{\r\n                  deposit.dateReceived === null\r\n                    ? \"\"\r\n                    : deposit.dateReceived.substring(0, 10) + \", \"\r\n                }}\r\n                {{ deposit.status }}\r\n              </span>\r\n              <button\r\n                @click=\"$delete(booking.deposits, deposit.id)\"\r\n                class=\"delete\"\r\n              ></button>\r\n            </div>\r\n          </article>\r\n        </div>\r\n\r\n        <!-- ADD DEPOSIT -->\r\n        <div class=\"container\">\r\n          <b-field grouped group-multiline>\r\n            <b-field label=\"Statut\" label-position=\"on-border\">\r\n              <b-select\r\n                v-model=\"tempDeposit.status\"\r\n                placeholder=\"Select a status\"\r\n              >\r\n                <option value=\"pending\">En attente</option>\r\n                <option value=\"received\">Recu</option>\r\n                <option value=\"returned\">Rendu</option>\r\n              </b-select>\r\n            </b-field>\r\n            <b-field label=\"Montant\" label-position=\"on-border\">\r\n              <b-input v-model=\"tempDeposit.amount\"></b-input>\r\n            </b-field>\r\n            <b-field label=\"Date reception\" label-position=\"on-border\">\r\n              <b-datepicker\r\n                icon-pack=\"fas\"\r\n                v-model=\"tempDeposit.dateReceived\"\r\n                placeholder=\"Date de reception\"\r\n              ></b-datepicker>\r\n            </b-field>\r\n            <b-field label=\"Type\" label-position=\"on-border\">\r\n              <b-select v-model=\"tempDeposit.type\" placeholder=\"Select a type\">\r\n                <option value=\"cheque\">Cheque</option>\r\n                <option value=\"transfer\">Virement</option>\r\n                <option value=\"cash\">Liquide</option>\r\n              </b-select>\r\n            </b-field>\r\n            <b-button type=\"is-primary\" @click=\"addDeposit()\">Ajouter</b-button>\r\n          </b-field>\r\n\r\n          <hr />\r\n\r\n          <!-- EXTRA TRANSACTIONS -->\r\n          <label class=\"label\">Transactions supplémentaires</label>\r\n\r\n          <!-- TRANSACTION LIST -->\r\n          <div\r\n            class=\"container\"\r\n            style=\"margin-bottom:1rem;\"\r\n            v-for=\"cost in booking.costs\"\r\n            :key=\"cost.id\"\r\n          >\r\n            <article class=\"message is-light\">\r\n              <div class=\"message-header\">\r\n                <p>\r\n                  <b-icon\r\n                    style=\"margin-right:0.5ch;display: inline-table;\"\r\n                    pack=\"fas\"\r\n                    :icon=\"cost.type === 'payment' ? 'arrow-up' : 'arrow-down'\"\r\n                    size=\"is-medium\"\r\n                    type=\"is-grey\"\r\n                  ></b-icon>\r\n                  {{ cost.label }}\r\n                  <span class=\"has-text-grey\"\r\n                    >{{ cost.units }} x {{ cost.unitPrice }} €</span\r\n                  >\r\n                </p>\r\n                <span\r\n                  :class=\"\r\n                    'tag ' +\r\n                      (cost.type === 'payment' ? 'is-success' : 'is-danger')\r\n                  \"\r\n                >\r\n                  {{ cost.type === \"payment\" ? \"+\" : \"-\" }}\r\n                  {{ cost.totalPrice }} €\r\n                </span>\r\n\r\n                <button\r\n                  @click=\"$delete(booking.costs, cost.id)\"\r\n                  class=\"delete\"\r\n                ></button>\r\n              </div>\r\n            </article>\r\n          </div>\r\n\r\n          <!-- ADD TRANSACTION -->\r\n          <div class=\"container\">\r\n            <b-field grouped group-multiline>\r\n              <b-field label=\"Type\" label-position=\"on-border\">\r\n                <b-select v-model=\"tempCost.type\" placeholder=\"Type\">\r\n                  <option value=\"payment\">Paiement</option>\r\n                  <option value=\"cost\">Coût</option>\r\n                </b-select>\r\n              </b-field>\r\n              <b-field label=\"Label\" label-position=\"on-border\">\r\n                <b-input v-model=\"tempCost.label\"></b-input>\r\n              </b-field>\r\n              <b-field label=\"Unités\" label-position=\"on-border\">\r\n                <b-input v-model=\"tempCost.units\"></b-input>\r\n              </b-field>\r\n              <b-field label=\"Prix unitaire\" label-position=\"on-border\">\r\n                <b-input v-model=\"tempCost.unitPrice\"></b-input>\r\n              </b-field>\r\n              <b-field label=\"Total\" label-position=\"on-border\">\r\n                <b-numberinput\r\n                  :controls=\"false\"\r\n                  step=\"0.01\"\r\n                  v-model=\"tempCost.totalPrice\"\r\n                ></b-numberinput>\r\n              </b-field>\r\n              <b-button type=\"is-primary\" @click=\"addCost()\">Ajouter</b-button>\r\n            </b-field>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <!-- OPEN MODAL -->\r\n          <b-button type=\"is-primary\" @click=\"isComponentModalActive = true\"\r\n            >Open Modal</b-button\r\n          >\r\n\r\n          <b-button type=\"is-primary\" @click=\"printInvoice()\"\r\n            >Print Invoice</b-button\r\n          >\r\n\r\n          <b-modal\r\n            :active.sync=\"isComponentModalActive\"\r\n            trap-focus\r\n            width=\"90%\"\r\n            style=\"height:100%;\"\r\n          >\r\n            <htmlinvoice></htmlinvoice>\r\n          </b-modal>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport htmlinvoice from \"../htmlinvoice.vue\";\r\n\r\nexport default {\r\n  components: { htmlinvoice },\r\n\r\n  data() {\r\n    return {\r\n      isComponentModalActive: false,\r\n      booking: this.$store.state.booking,\r\n      tempDeposit: {\r\n        id: null,\r\n        status: null,\r\n        type: null,\r\n        amount: null,\r\n        dateReceived: null\r\n      },\r\n      tempCost: {\r\n        id: null,\r\n        type: null,\r\n        label: null,\r\n        units: null,\r\n        unitPrice: null,\r\n        totalPrice: null\r\n      }\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n\r\n  methods: {\r\n    getId: function(object) {\r\n      var arr = [];\r\n      for (var obj in object) {\r\n        arr.push(parseInt(obj));\r\n      }\r\n      return Math.max(-1, ...arr) + 1;\r\n    },\r\n    openModal() {\r\n      this.$buefy.modal.open({\r\n        parent: this,\r\n        component: htmlInvoice,\r\n        hasModalCard: false\r\n      });\r\n    },\r\n    addDeposit: function() {\r\n      var tempDeposit = this.tempDeposit;\r\n      var tempDeposits = this.booking.deposits;\r\n      tempDeposit.id = this.getId(tempDeposits);\r\n      tempDeposits.push(tempDeposit);\r\n\r\n      Vue.set(\r\n        this.booking,\r\n        \"deposits\",\r\n        JSON.parse(JSON.stringify(tempDeposits))\r\n      );\r\n      this.tempDeposit = {\r\n        id: null,\r\n        status: null,\r\n        type: null,\r\n        amount: null,\r\n        dateReceived: null\r\n      };\r\n    },\r\n\r\n    printInvoice() {\r\n      var printWindow = window.open(\"./htmlinvoice\");\r\n      printWindow.focus();\r\n      printWindow.print();\r\n    },\r\n\r\n    addCost: function() {\r\n      var tempCost = this.tempCost;\r\n      var tempCosts = this.booking.costs;\r\n      tempCost.id = this.getId(tempCosts);\r\n      tempCosts.push(tempCost);\r\n\r\n      Vue.set(this.booking, \"costs\", JSON.parse(JSON.stringify(tempCosts)));\r\n      this.tempCost = {\r\n        id: null,\r\n        type: null,\r\n        label: null,\r\n        units: null,\r\n        unitPrice: null,\r\n        totalPrice: null\r\n      };\r\n    },\r\n    getDepositIcon: function(depositType) {\r\n      if (depositType === \"cheque\") {\r\n        return \"money-check-alt\";\r\n      } else if (depositType === \"cash\") {\r\n        return \"money-bill-wave\";\r\n      } else if (depositType === \"transfer\") {\r\n        return \"exchange-alt\";\r\n      } else {\r\n        return \"money-check-alt\";\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}