(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={index:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1193:function(t,e,s){},3183:function(t,e,s){t.exports=s.p+"img/mill_sketch.9f5e7e4b.jpg"},4491:function(t,e,s){"use strict";var a=s("4963"),i=s.n(a);i.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="4678"},4963:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t._m(0),s("b-tabs",{attrs:{id:"sheetTabs",size:"is-medium is-boxed",expanded:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("b-tab-item",{staticClass:"has-text-grey",attrs:{label:"Reservation"}},[s("reservation-tab")],1),s("b-tab-item",{attrs:{label:"Restauration"}},[s("catering-tab")],1),s("b-tab-item",{attrs:{label:"Frais",disabled:""}}),s("b-tab-item",{attrs:{label:"Facture"}},[s("invoice-tab")],1)],1),s("div",[s("b-collapse",{attrs:{open:!1,"aria-id":"payloadCollapse"}},[s("button",{staticClass:"button",attrs:{slot:"trigger","aria-controls":"payloadCollapse"},slot:"trigger"},[t._v(" Payload ")]),s("pre",[t._v(t._s(t.apiState))])])],1)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"hero"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title has-text-white is-3"},[t._v("stay-manager")]),s("h2",{staticClass:"subtitle has-text-light is-4"},[t._v(" Gérez vos réservations via cette page ")])])])])}],o=(s("d3b7"),s("96cf"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"box"},[s("form-booking",{staticClass:"form-section"})],1),s("div",{staticClass:"box"},[s("form-contact",{staticClass:"form-section"})],1),s("div",{staticClass:"box"},[s("form-stay",{staticClass:"form-section"})],1)])])}),r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("h3",{staticClass:"title is-3"},[t._v("Reservation")])])}],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h6",{staticClass:"title is-6"},[t._v("Contact")]),s("b-field",{attrs:{label:"Email","label-position":"on-border"}},[s("b-input",{attrs:{type:"email",placeholder:"Email"},model:{value:t.contact.email,callback:function(e){t.$set(t.contact,"email",e)},expression:"contact.email"}})],1),s("b-field",{attrs:{label:"Nom","label-position":"on-border"}},[s("b-input",{attrs:{placeholder:"Nom"},model:{value:t.contact.name,callback:function(e){t.$set(t.contact,"name",e)},expression:"contact.name"}})],1),s("b-field",{attrs:{label:"Téléphone","label-position":"on-border"}},[s("b-input",{attrs:{placeholder:"Téléphone"},model:{value:t.contact.phone,callback:function(e){t.$set(t.contact,"phone",e)},expression:"contact.phone"}})],1),s("b-field",{attrs:{label:"Nationalité","label-position":"on-border"}},[s("b-select",{attrs:{placeholder:"Nationalité"},model:{value:t.contact.nationality,callback:function(e){t.$set(t.contact,"nationality",e)},expression:"contact.nationality"}},[s("option",{attrs:{value:"french"}},[t._v("Francais")]),s("option",{attrs:{value:"dutch"}},[t._v("Néerlandais")]),s("option",{attrs:{value:"german"}},[t._v("Allemand")]),s("option",{attrs:{value:"other"}},[t._v("Autre")])])],1)],1)},c=[],u={data:function(){return{contact:this.$store.state.contact}},computed:{}},d=u,p=s("2877"),b=Object(p["a"])(d,l,c,!1,null,"7ad50291",null),m=b.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h6",{staticClass:"title is-6"},[t._v("Réservation")]),s("b-field",{attrs:{type:t.getStatusColor(t.booking.status),"custom-class":"is-medium",label:"Statut","label-position":"on-border"}},[s("b-select",{attrs:{size:"is-medium",placeholder:"Select a type"},model:{value:t.booking.status,callback:function(e){t.$set(t.booking,"status",e)},expression:"booking.status"}},[s("option",{attrs:{value:"inquiry"}},[t._v("Demande")]),s("option",{attrs:{value:"contract"}},[t._v("Contrat")]),s("option",{attrs:{value:"completed"}},[t._v("Achevé")]),s("option",{attrs:{value:"cancelled"}},[t._v("Annulé")])])],1),s("b-field",{attrs:{label:"Source","label-position":"on-border"}},[s("b-select",{attrs:{placeholder:"Source"},model:{value:t.booking.source,callback:function(e){t.$set(t.booking,"source",e)},expression:"booking.source"}},[s("option",{attrs:{value:"airbnb"}},[t._v("AirBnb")]),s("option",{attrs:{value:"homeaway"}},[t._v("HomeAway")]),s("option",{attrs:{value:"direct"}},[t._v("Direct")]),s("option",{attrs:{value:"other"}},[t._v("Autre")])])],1),s("b-field",{attrs:{label:"Date de réservation"}},[s("b-datepicker",{ref:"bookingDatePicker",attrs:{"icon-pack":"fas",placeholder:"Date de réservation"},model:{value:t.booking.date,callback:function(e){t.$set(t.booking,"date",e)},expression:"booking.date"}},[s("button",{staticClass:"button is-success",on:{click:function(e){return t.$refs.bookingDatePicker.toggle()}}},[s("b-icon",{attrs:{pack:"fas",icon:"check"}}),s("span",[t._v("Valider")])],1)])],1)],1)},f=[],h={props:{},data:function(){return{booking:this.$store.state.booking}},computed:{},methods:{getStatusColor:function(t){return"inquiry"===t?"is-warning":"contract"===t?"is-success":"completed"===t?"is-success":"cancelled"===t?"is-danger":"is-grey"}}},g=h,y=Object(p["a"])(g,v,f,!1,null,"93a6789a",null),_=y.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h6",{staticClass:"title is-6"},[t._v("Nuitées")]),s("b-field",{attrs:{label:"Check-in","label-position":"on-border"}},[s("b-datetimepicker",{ref:"arrivalDatetimePicker",attrs:{"icon-pack":"fas",placeholder:"Check-in",timepicker:{incrementMinutes:15},"datetime-formatter":t.humanFormatDatetime,"mobile-native":!1},model:{value:t.stay.arrivalDatetime,callback:function(e){t.$set(t.stay,"arrivalDatetime",e)},expression:"stay.arrivalDatetime"}},[s("template",{slot:"right"},[s("button",{staticClass:"button is-success",on:{click:function(e){return t.$refs.arrivalDatetimePicker.toggle()}}},[s("b-icon",{attrs:{pack:"fas",icon:"check"}}),s("span",[t._v("Valider")])],1)])],2)],1),s("b-field",{attrs:{label:"Check-out","label-position":"on-border"}},[s("b-datetimepicker",{ref:"departureDatetimePicker",attrs:{"icon-pack":"fas",placeholder:"Check-out",timepicker:{incrementMinutes:15},"datetime-formatter":t.humanFormatDatetime,"mobile-native":!1},model:{value:t.stay.departureDatetime,callback:function(e){t.$set(t.stay,"departureDatetime",e)},expression:"stay.departureDatetime"}},[s("template",{slot:"right"},[s("button",{staticClass:"button is-success",on:{click:function(e){return t.$refs.departureDatetimePicker.toggle()}}},[s("b-icon",{attrs:{pack:"fas",icon:"check"}}),s("span",[t._v("Valider")])],1)])],2)],1),s("b-field",{attrs:{label:"Invités payants","label-position":"on-border",message:"2 ans et plus"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",min:"10",controlsPosition:"compact"},model:{value:t.stay.baseGuests,callback:function(e){t.$set(t.stay,"baseGuests",e)},expression:"stay.baseGuests"}})],1),s("b-field",{attrs:{label:"Enfants","label-position":"on-border"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",min:"0",controlsPosition:"compact"},model:{value:t.stay.children,callback:function(e){t.$set(t.stay,"children",e)},expression:"stay.children"}})],1),s("b-field",{attrs:{label:"Animaux de compagnie","label-position":"on-border"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",min:"0",controlsPosition:"compact"},model:{value:t.stay.pets,callback:function(e){t.$set(t.stay,"pets",e)},expression:"stay.pets"}})],1),s("b-field",{attrs:{label:"Informations supplémentaires"}},[s("b-input",{attrs:{type:"textarea"},model:{value:t.stay.guestInfo,callback:function(e){t.$set(t.stay,"guestInfo",e)},expression:"stay.guestInfo"}})],1),s("b-collapse",{staticClass:"card",attrs:{open:!1,"aria-id":"editNightContent"}},[s("div",{staticClass:"card-header",attrs:{slot:"trigger",role:"button","aria-controls":"editNightContent"},slot:"trigger"},[s("p",{staticClass:"card-header-title"},[t._v(" "+t._s(this.stay.stayNightArray.length)+" nights ")]),s("a",{staticClass:"card-header-icon"},[s("b-icon",{attrs:{pack:"fas",icon:"caret-down"}})],1)]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},t._l(t.stay.stayNightArray,(function(e){return s("div",{key:e.id},[s("b-field",{attrs:{grouped:""}},[s("b-field",{staticStyle:{width:"100%"},attrs:{label:t.editNightContentTextFormat(e.date),type:"has-text-grey"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",min:"10",controlsPosition:"compact"},model:{value:e.guests,callback:function(s){t.$set(e,"guests",s)},expression:"night.guests"}})],1)],1)],1)})),0)])])],1)},k=[],j=s("c1df"),x=s.n(j),D={data:function(){return{stay:this.$store.state.stay}},computed:{computedStay:function(){return Object.assign({},this.stay)},stayNightArray:function(){var t=[],e=x()(this.stay.arrivalDatetime),s=x()(this.stay.departureDatetime),a=0;while(e<s){var i={id:a,date:e.unix(),guests:this.stay.baseGuests};t.push(i),e=e.add(1,"days"),a++}return t}},methods:{humanFormatDatetime:function(t){return x()(t).format("ddd D MMM YYYY - HH:mm")},editNightContentTextFormat:function(t){return x.a.unix(t).format("dddd D")}},watch:{computedStay:{deep:!0,handler:function(t,e){var s=x()(e.arrivalDatetime),a=x()(e.departureDatetime),i=x()(t.arrivalDatetime),n=x()(t.departureDatetime);s.format("LL")!==i.format("LL")&a.format("LL")==n.format("LL")&&(this.stay.departureDatetime=i.hour(a.hour()).minute(a.minute()).toDate()),this.stay.stayNightArray=this.stayNightArray}}}},$=D,P=(s("4491"),Object(p["a"])($,C,k,!1,null,null,null)),w=P.exports,S={components:{formContact:m,formBooking:_,formStay:w},data:function(){return{}},computed:{stay:function(){return this.$store.state.stay},booking:function(){return this.$store.state.booking},contact:function(){return this.$store.state.contact}},watch:{},methods:{}},N=S,A=Object(p["a"])(N,o,r,!1,null,null,null),T=A.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[t._m(0),t._l(t.meals,(function(e){return s("div",{key:e.id,staticClass:"card meal-card"},[s("div",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v(t._s(e.type))]),s("b-button",{attrs:{"icon-pack":"fas",type:"is-medium is-danger","icon-left":"times"},on:{click:function(s){return t.$delete(t.meals,e.id)}}})],1),s("div",{staticClass:"card-content"},[s("b-field",{attrs:{label:"Date","label-position":"on-border"}},[s("b-datepicker",{attrs:{"icon-pack":"fas",placeholder:"Date du repas"},model:{value:e.date,callback:function(s){t.$set(e,"date",s)},expression:"meal.date"}})],1),s("b-field",{attrs:{grouped:"","group-multiline":""}},[s("b-field",{attrs:{label:"Adultes","label-position":"on-border"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",min:"0",controlsPosition:"compact"},model:{value:e.adults,callback:function(s){t.$set(e,"adults",s)},expression:"meal.adults"}})],1),s("b-field",{attrs:{label:"Prix adulte","label-position":"on-border"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",step:"0.5",min:"0",controlsPosition:"compact"},model:{value:e.adultPrice,callback:function(s){t.$set(e,"adultPrice",s)},expression:"meal.adultPrice"}})],1)],1),s("b-field",{attrs:{grouped:"","group-multiline":""}},[s("b-field",{attrs:{label:"Enfants","label-position":"on-border"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",min:"0",controlsPosition:"compact"},model:{value:e.children,callback:function(s){t.$set(e,"children",s)},expression:"meal.children"}})],1),s("b-field",{attrs:{label:"Prix enfant","label-position":"on-border"}},[s("b-numberinput",{attrs:{"icon-pack":"fas",step:"0.5",min:"0",controlsPosition:"compact"},model:{value:e.childPrice,callback:function(s){t.$set(e,"childPrice",s)},expression:"meal.childPrice"}})],1)],1),s("b-field",{attrs:{label:"Contenu","label-position":"on-border"}},[s("b-input",{attrs:{type:"textarea"},model:{value:e.information,callback:function(s){t.$set(e,"information",s)},expression:"meal.information"}})],1),s("hr"),t._l(e.costs,(function(a){return s("div",{key:a.id,staticClass:"card meal-card"},[s("div",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v(" "+t._s(a.name)+" : "+t._s(a.totalPrice)+" euros ")]),s("b-button",{attrs:{"icon-pack":"fas",type:"is-small is-light","icon-left":"times"},on:{click:function(s){return t.$delete(e.costs,a.id)}}})],1),s("div",{staticClass:"card-content"},t._l(a,(function(e,a){return s("div",{key:a},[s("span",{staticClass:"tag is-dark is-small"},[t._v(t._s(a))]),s("pre",[t._v(t._s(e))])])})),0)])})),s("b-field",{attrs:{grouped:"","group-multiline":""}},[s("b-field",{attrs:{label:"Type"}},[s("b-select",{attrs:{placeholder:"Select a type"},model:{value:e.tempCost.type,callback:function(s){t.$set(e.tempCost,"type",s)},expression:"meal.tempCost.type"}},[s("option",{attrs:{value:"caterer"}},[t._v("Restaurateur")]),s("option",{attrs:{value:"groceries"}},[t._v("Courses")])])],1),s("b-field",{attrs:{label:"Nom"}},[s("b-input",{model:{value:e.tempCost.name,callback:function(s){t.$set(e.tempCost,"name",s)},expression:"meal.tempCost.name"}})],1),s("b-field",{attrs:{label:"Unités"}},[s("b-input",{model:{value:e.tempCost.units,callback:function(s){t.$set(e.tempCost,"units",s)},expression:"meal.tempCost.units"}})],1),s("b-field",{attrs:{label:"Prix unitaire"}},[s("b-input",{model:{value:e.tempCost.unitPrice,callback:function(s){t.$set(e.tempCost,"unitPrice",s)},expression:"meal.tempCost.unitPrice"}})],1),s("b-field",{attrs:{label:"Prix total"}},[s("b-input",{model:{value:e.tempCost.totalPrice,callback:function(s){t.$set(e.tempCost,"totalPrice",s)},expression:"meal.tempCost.totalPrice"}})],1)],1),s("b-field",{attrs:{label:"Informations supplémentaires","label-position":"on-border"}},[s("b-input",{attrs:{type:"textarea"},model:{value:e.tempCost.information,callback:function(s){t.$set(e.tempCost,"information",s)},expression:"meal.tempCost.information"}})],1),s("b-button",{attrs:{type:"is-primary"},on:{click:function(s){return t.addCost(e.id)}}},[t._v("Ajouter")])],2)])})),s("div",{staticClass:"box"},[s("h5",{staticClass:"title is-5"},[t._v(" Ajouter repas "),s("b-dropdown",{staticClass:"is-pulled-right",attrs:{"aria-role":"list"}},[s("button",{staticClass:"button is-light is-small",attrs:{slot:"trigger"},slot:"trigger"},[s("b-icon",{attrs:{pack:"fas",icon:"plus",size:"is-medium"}})],1),s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.addMeal("breakfast")}}},[t._v("Petit-dejeuner")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.addMeal("lunch")}}},[t._v("Déjeuner")]),s("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.addMeal("dinner")}}},[t._v("Dîner")])],1)],1)])],2)])},O=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("h3",{staticClass:"title is-3"},[t._v("Restauration")])])}],z=(s("99af"),s("7db0"),s("e25e"),{components:{},data:function(){return{meals:this.$store.state.meals}},computed:{},watch:{},methods:{getId:function(t){var e=[];for(var s in t)e.push(parseInt(s));return Math.max.apply(Math,[-1].concat(e))+1},addMeal:function(t){var e={id:this.getId(this.meals),type:t,adults:10,children:0,adultPrice:17.5,childPrice:15,information:null,tempCost:{type:null,name:null,units:null,unitPrice:null,totalPrice:null,information:null},costs:[]};this.meals.push(e)},addCost:function(t){var e=this.meals.find((function(e){return e.id===t})),s=e.costs;e.tempCost.id=this.getId(e.costs),s.push(e.tempCost),a["a"].set(e,"costs",JSON.parse(JSON.stringify(s))),e.tempCost={type:null,name:null,units:null,unitPrice:null,totalPrice:null,information:null}}}}),I=z,E=(s("e788"),Object(p["a"])(I,M,O,!1,null,"5b648f01",null)),R=E.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section",staticStyle:{height:"100%"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"box"},[s("h3",{staticClass:"title is-3"},[t._v("Facture")]),s("label",{staticClass:"label"},[t._v("Caution")]),t._l(t.booking.deposits,(function(e){return s("div",{key:e.id,staticClass:"container",staticStyle:{"margin-bottom":"1rem"}},[s("article",{staticClass:"message is-light"},[s("div",{staticClass:"message-header"},[s("p",[s("b-icon",{staticStyle:{"margin-right":"0.5ch",display:"inline-table"},attrs:{pack:"fas",icon:t.getDepositIcon(e.type),size:"is-medium",type:"is-grey"}}),s("span",{staticClass:"has-text-grey"},[t._v(t._s(e.type)+" -")]),t._v(" "+t._s(e.amount)+" euros ")],1),s("span",{class:"tag is-medium "+("pending"===e.status?"is-warning":"is-success")},[t._v(" "+t._s(null===e.dateReceived?"":e.dateReceived.substring(0,10)+", ")+" "+t._s(e.status)+" ")]),s("button",{staticClass:"delete",on:{click:function(s){return t.$delete(t.booking.deposits,e.id)}}})])])])})),s("div",{staticClass:"container"},[s("b-field",{attrs:{grouped:"","group-multiline":""}},[s("b-field",{attrs:{label:"Statut","label-position":"on-border"}},[s("b-select",{attrs:{placeholder:"Select a status"},model:{value:t.tempDeposit.status,callback:function(e){t.$set(t.tempDeposit,"status",e)},expression:"tempDeposit.status"}},[s("option",{attrs:{value:"pending"}},[t._v("En attente")]),s("option",{attrs:{value:"received"}},[t._v("Recu")]),s("option",{attrs:{value:"returned"}},[t._v("Rendu")])])],1),s("b-field",{attrs:{label:"Montant","label-position":"on-border"}},[s("b-input",{model:{value:t.tempDeposit.amount,callback:function(e){t.$set(t.tempDeposit,"amount",e)},expression:"tempDeposit.amount"}})],1),s("b-field",{attrs:{label:"Date reception","label-position":"on-border"}},[s("b-datepicker",{attrs:{"icon-pack":"fas",placeholder:"Date de reception"},model:{value:t.tempDeposit.dateReceived,callback:function(e){t.$set(t.tempDeposit,"dateReceived",e)},expression:"tempDeposit.dateReceived"}})],1),s("b-field",{attrs:{label:"Type","label-position":"on-border"}},[s("b-select",{attrs:{placeholder:"Select a type"},model:{value:t.tempDeposit.type,callback:function(e){t.$set(t.tempDeposit,"type",e)},expression:"tempDeposit.type"}},[s("option",{attrs:{value:"cheque"}},[t._v("Cheque")]),s("option",{attrs:{value:"transfer"}},[t._v("Virement")]),s("option",{attrs:{value:"cash"}},[t._v("Liquide")])])],1),s("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.addDeposit()}}},[t._v("Ajouter")])],1),s("hr"),s("label",{staticClass:"label"},[t._v("Transactions supplémentaires")]),t._l(t.booking.costs,(function(e){return s("div",{key:e.id,staticClass:"container",staticStyle:{"margin-bottom":"1rem"}},[s("article",{staticClass:"message is-light"},[s("div",{staticClass:"message-header"},[s("p",[s("b-icon",{staticStyle:{"margin-right":"0.5ch",display:"inline-table"},attrs:{pack:"fas",icon:"payment"===e.type?"arrow-up":"arrow-down",size:"is-medium",type:"is-grey"}}),t._v(" "+t._s(e.label)+" "),s("span",{staticClass:"has-text-grey"},[t._v(t._s(e.units)+" x "+t._s(e.unitPrice)+" €")])],1),s("span",{class:"tag "+("payment"===e.type?"is-success":"is-danger")},[t._v(" "+t._s("payment"===e.type?"+":"-")+" "+t._s(e.totalPrice)+" € ")]),s("button",{staticClass:"delete",on:{click:function(s){return t.$delete(t.booking.costs,e.id)}}})])])])})),s("div",{staticClass:"container"},[s("b-field",{attrs:{grouped:"","group-multiline":""}},[s("b-field",{attrs:{label:"Type","label-position":"on-border"}},[s("b-select",{attrs:{placeholder:"Type"},model:{value:t.tempCost.type,callback:function(e){t.$set(t.tempCost,"type",e)},expression:"tempCost.type"}},[s("option",{attrs:{value:"payment"}},[t._v("Paiement")]),s("option",{attrs:{value:"cost"}},[t._v("Coût")])])],1),s("b-field",{attrs:{label:"Label","label-position":"on-border"}},[s("b-input",{model:{value:t.tempCost.label,callback:function(e){t.$set(t.tempCost,"label",e)},expression:"tempCost.label"}})],1),s("b-field",{attrs:{label:"Unités","label-position":"on-border"}},[s("b-input",{model:{value:t.tempCost.units,callback:function(e){t.$set(t.tempCost,"units",e)},expression:"tempCost.units"}})],1),s("b-field",{attrs:{label:"Prix unitaire","label-position":"on-border"}},[s("b-input",{model:{value:t.tempCost.unitPrice,callback:function(e){t.$set(t.tempCost,"unitPrice",e)},expression:"tempCost.unitPrice"}})],1),s("b-field",{attrs:{label:"Total","label-position":"on-border"}},[s("b-numberinput",{attrs:{controls:!1,step:"0.01"},model:{value:t.tempCost.totalPrice,callback:function(e){t.$set(t.tempCost,"totalPrice",e)},expression:"tempCost.totalPrice"}})],1),s("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.addCost()}}},[t._v("Ajouter")])],1)],1),s("hr"),s("b-button",{attrs:{type:"is-primary"},on:{click:function(e){t.isComponentModalActive=!0}}},[t._v("Open Modal")]),s("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.printInvoice()}}},[t._v("Print Invoice")]),s("b-modal",{staticStyle:{height:"100%"},attrs:{active:t.isComponentModalActive,"trap-focus":"",width:"90%"},on:{"update:active":function(e){t.isComponentModalActive=e}}},[s("htmlinvoice")],1)],2)],2)])])},H=[],G=s("65ca"),L={components:{htmlinvoice:G["a"]},data:function(){return{isComponentModalActive:!1,booking:this.$store.state.booking,tempDeposit:{id:null,status:null,type:null,amount:null,dateReceived:null},tempCost:{id:null,type:null,label:null,units:null,unitPrice:null,totalPrice:null}}},computed:{},watch:{},methods:{getId:function(t){var e=[];for(var s in t)e.push(parseInt(s));return Math.max.apply(Math,[-1].concat(e))+1},openModal:function(){this.$buefy.modal.open({parent:this,component:htmlInvoice,hasModalCard:!1})},addDeposit:function(){var t=this.tempDeposit,e=this.booking.deposits;t.id=this.getId(e),e.push(t),a["a"].set(this.booking,"deposits",JSON.parse(JSON.stringify(e))),this.tempDeposit={id:null,status:null,type:null,amount:null,dateReceived:null}},printInvoice:function(){var t=window.open("./htmlinvoice");t.focus(),t.print()},addCost:function(){var t=this.tempCost,e=this.booking.costs;t.id=this.getId(e),e.push(t),a["a"].set(this.booking,"costs",JSON.parse(JSON.stringify(e))),this.tempCost={id:null,type:null,label:null,units:null,unitPrice:null,totalPrice:null}},getDepositIcon:function(t){return"cheque"===t?"money-check-alt":"cash"===t?"money-bill-wave":"transfer"===t?"exchange-alt":"money-check-alt"}}},J=L,q=Object(p["a"])(J,F,H,!1,null,"e656a846",null),Y=q.exports,B=s("3003"),V=s("bc3a"),U=s.n(V);a["a"].use(B["a"]);var K={components:{reservationTab:T,cateringTab:R,invoiceTab:Y},data:function(){return{activeTab:0}},computed:{state:function(){return this.getState()}},asyncComputed:{apiState:{get:function(){return this.updateApiState()},default:function(){return this.$store.state}}},watch:{state:{handler:function(){localStorage.setItem("state",JSON.stringify(this.state))},deep:!0}},methods:{getState:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store.state,e.abrupt("return",t);case 2:case"end":return e.stop()}}),null,this)},tempFunction:function(){this.$store.state.tempBool="OK",console.log(this.$store.state.booking)},updateApiState:function(){var t,e,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},e=this.state,a.next=4,regeneratorRuntime.awrap(U()({method:"post",url:"/invoice",headers:t,data:e,timeout:5e3}).then((function(t){return console.log(t.data),t.data}))["catch"]((function(t){console.log(t)})));case 4:return s=a.sent,a.abrupt("return",s);case 6:case"end":return a.stop()}}),null,this)}}},Q=K,W=(s("5c0b"),Object(p["a"])(Q,i,n,!1,null,null,null)),X=W.exports,Z=s("c0d6"),tt=s("289d");s("15f5"),s("7051");a["a"].use(tt["a"],{defaultIconPack:"fas"}),a["a"].config.productionTip=!1,new a["a"]({store:Z["a"],render:function(t){return t(X)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),i=s.n(a);i.a},"65ca":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("link",{attrs:{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.2.0/css/all.css"}}),s("div",{staticClass:"A4 sheet stretchy-wrapper flex-container"},[s("div",{staticClass:"header"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"container"},[s("h4",{staticClass:"title is-size-4 is-uppercase"},[t._v("Facture #001")]),s("span",{class:t.getStatusColor(t.state.booking.status)+" is-uppercase tag"},[t._v(t._s(t.state.booking.status))])])])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"container is-size-7 has-text-right"},[s("p",[t._v(t._s(t.todayDate))]),s("p",[t._v("St. Germain des Bois")])])])])]),s("div",{staticClass:"container padding-10mm"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"columns is-mobile"},[t._m(0),s("div",{staticClass:"column"},[s("div",{staticClass:"has-text-centered"},[s("h6",{staticClass:"title is-6"},[t._v("CLIENT")]),s("p",[t._v(t._s(t.state.contact.name))]),s("br"),s("br"),s("p",[t._v(t._s(t.state.contact.phone))]),s("p",[t._v(t._s(t.state.contact.email))])])])])])])])]),s("div",[s("table",{staticClass:"table is-fullwidth is-bordered"},[t._m(1),s("tbody",[t.staySubtotal*(1-t.invoiceData.discount)!==0?s("tr",[s("td",[t._v("Total sejour")]),s("td",[t._v(t._s(t.staySubtotal*(1-t.invoiceData.discount))+" €")])]):t._e(),0!==t.invoiceData.cateringTotal?s("tr",[s("td",[t._v("Total restauration")]),s("td",[t._v(t._s(t.invoiceData.cateringTotal)+" €")])]):t._e(),s("tr",[s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-semibold"},[t._v("Sous-total")]),s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-bold"},[t._v(t._s(t.staySubtotal*(1-t.invoiceData.discount)+t.invoiceData.cateringTotal)+" €")])])]),t._l(t.state.booking.costs,(function(e){return s("tbody",{key:e.id},[s("tr",[s("td",{class:"payment"===e.type?"has-text-success has-text-weight-semibold":""},[t._v(t._s(e.label))]),s("td",{class:"payment"===e.type?"has-text-success has-text-weight-semibold":""},[t._v(t._s("payment"===e.type?"-":"+")+t._s(e.totalPrice)+" €")])])])})),s("tbody",[s("tr",[s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-semibold"},[t._v("Reste à payer")]),s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-semibold"},[t._v(t._s(Math.round(100*t.invoiceTotal)/100)+" €")])])])],2),s("p",{staticClass:"has-text-grey has-text-right"},[t._v("TVA non-applicable")])]),t.state.booking.deposits.length>0?s("div",[s("span",{staticClass:"is-size-5 title"},[t._v("Caution")]),t._l(t.state.booking.deposits,(function(e){return s("div",{key:e.id,staticClass:"container",staticStyle:{"margin-bottom":"1rem"}},[s("article",{staticClass:"message is-light"},[s("div",{staticClass:"message-header"},[s("p",[s("b-icon",{staticStyle:{"margin-right":"0.5ch",display:"inline-table"},attrs:{pack:"fas",icon:t.getDepositIcon(e.type),size:"is-medium",type:"is-grey"}}),s("span",{staticClass:"has-text-grey is-uppercase"},[t._v(t._s(e.type)+" -")]),t._v(" "+t._s(e.amount)+" € ")],1),s("span",{class:"tag is-medium "+("pending"===e.status?"is-warning":"is-success")},[t._v(" "+t._s(null===e.dateReceived?"":e.dateReceived.substring(0,10)+", ")+" "+t._s(e.status)+" ")])])])])}))],2):t._e(),s("div")]),s("div",{staticClass:"A4 sheet stretchy-wrapper flex-container"},[s("div",{staticClass:"header"},[s("div",{staticClass:"level"},[t._m(2),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"container is-size-7 has-text-right"},[s("p",[t._v(t._s(t.todayDate))]),s("p",[t._v("St. Germain des Bois")])])])])]),s("div",{staticClass:"container"},[s("div",{staticClass:"field is-grouped is-grouped-multiline"},[s("div",{staticClass:"control"},[s("div",{staticClass:"tags has-addons"},[s("span",{staticClass:"tag is-dark"},[t._v("Check-in")]),s("span",{staticClass:"tag is-light"},[t._v(" "+t._s(t.humanFormatDate(t.state.stay.arrivalDatetime))+" "),s("b-icon",{staticStyle:{"margin-left":"0.5ch","margin-right":"0.5ch"},attrs:{pack:"fas",icon:"clock",size:"is-small"}}),t._v(" "+t._s(t.humanFormatTime(t.state.stay.arrivalDatetime))+" ")],1)])]),s("div",{staticClass:"control"},[s("div",{staticClass:"tags has-addons"},[s("span",{staticClass:"tag is-dark"},[t._v("Check-out")]),s("span",{staticClass:"tag is-light"},[t._v(" "+t._s(t.humanFormatDate(t.state.stay.departureDatetime))+" "),s("b-icon",{staticStyle:{"margin-left":"0.5ch","margin-right":"0.5ch"},attrs:{pack:"fas",icon:"clock",size:"is-small"}}),t._v(" "+t._s(t.humanFormatTime(t.state.stay.departureDatetime))+" ")],1)])]),s("span",{staticClass:"tag is-dark"},[t._v(t._s(t.state.stay.baseGuests)+" personnes")])])]),t._m(3)]),s("table",{staticClass:"table is-fullwidth is-bordered"},[t._m(4),s("tbody",[s("tr",[s("td",[t._v("Villa")]),s("td",[t._v(t._s(t.invoiceData.villaNights)+" nuit(s)")]),s("td",[t._v(t._s(t.state.prices.villaNight)+" €")]),s("td",[t._v(t._s(t.invoiceData.villaNights*t.state.prices.villaNight)+" €")])])]),t._l(t.state.stay.stayNightArray,(function(e){return s("tbody",{key:e.id},[s("tr",[s("td",[t._v("Couchages "+t._s(t.humanInvoiceDate(e.date)))]),s("td",[t._v(t._s(e.guests))]),s("td",[t._v(t._s(t.state.prices.stayNight)+" €")]),s("td",[t._v(t._s(e.guests*t.state.prices.stayNight)+" €")])])])})),s("tbody",[t.state.stay.pets>0?s("tr",[s("td",[t._v("Animaux de compagnie")]),s("td",[t._v(t._s(t.state.stay.pets*t.invoiceData.villaNights)+" nuit(s)")]),s("td",[t._v(t._s(t.state.prices.petNight)+" €")]),s("td",[t._v(t._s(t.state.stay.pets*t.invoiceData.villaNights*t.state.prices.petNight)+" €")])]):t._e(),t.invoiceData.extraHours>0?s("tr",[s("td",[t._v("Heures supplémentaires")]),s("td",[t._v(t._s(t.invoiceData.extraHours))]),s("td",[t._v(t._s(t.state.prices.extraHour)+" €")]),s("td",[t._v(t._s(t.invoiceData.extraHours*t.state.prices.extraHour)+" €")])]):t._e(),s("tr",[s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-semibold"},[t._v("Sous-total")]),s("td"),s("td"),s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-semibold"},[t._v(t._s(t.staySubtotal)+" €")])]),t.invoiceData.discount>0?s("tr",[s("td",[t._v("Réduction "+t._s(Math.round(100*t.invoiceData.discount))+"%")]),s("td"),s("td"),s("td",{staticClass:"has-text-success has-text-weight-semibold"},[t._v("-"+t._s(t.invoiceData.discount*t.staySubtotal)+" €")])]):t._e(),s("tr",{staticClass:"is-success"},[s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-semibold"},[t._v("Total séjour")]),s("td"),s("td"),s("td",{staticClass:"has-text-darkgrey is-uppercase has-text-weight-bold"},[t._v(t._s(t.staySubtotal*(1-t.invoiceData.discount))+" €")])])])],2),s("div")])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column"},[s("div",{staticClass:"has-text-centered"},[s("h6",{staticClass:"title is-6"},[t._v("HÔTE")]),s("p",[t._v("Gilberthe AKKERMANS")]),s("p",[t._v("Moulin du Merle")]),s("p",[t._v("58210 Saint-Germain-des-Bois")]),s("p",[t._v("06 77 29 83 45")]),s("p",[t._v("moulindumerle@gmail.com")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Produit")]),s("th",[t._v("Total")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"container"},[s("h4",{staticClass:"title is-size-4 is-uppercase"},[t._v("Facture #001 - DETAILS SEJOUR")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container padding-10mm"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"columns is-mobile"},[a("div",{staticClass:"column"},[a("h6",{staticClass:"title is-6"},[t._v("Propriete")]),a("p",[t._v("Villa de tourisme")]),a("p",[t._v("9 chambres")]),a("p",[t._v("3.5 salles de bains")]),a("p",[t._v("1 cuisine")])]),a("div",{staticClass:"column"},[a("img",{attrs:{src:s("3183")}})]),a("div",{staticClass:"column"},[a("div",{staticClass:"is-pulled-right"},[a("h6",{staticClass:"title is-6"},[t._v("Adresse")]),a("p",[t._v("Moulin du Merle")]),a("p",[t._v("58210")]),a("p",[t._v("St-Germain-des-Bois")])])])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Produit")]),s("th",[t._v("Unités")]),s("th",[t._v("Prix unitaire")]),s("th",[t._v("Total")])])])}],n=(s("4160"),s("accc"),s("0d03"),s("159b"),s("2b0e")),o=s("289d"),r=(s("5abe"),s("c1df")),l=s.n(r);s("4f4d");n["a"].use(o["a"]);var c={data:function(){return{todayDate:(new Date).toISOString().substring(0,10),state:this.$store.state}},computed:{extraHours:function(){var t=l()(this.state.stay.arrivalDatetime),e=l()(this.state.stay.departureDatetime),s=t.clone().set({hour:17,minute:0,second:0,millisecond:0}),a=e.clone().set({hour:14,minute:0,second:0,millisecond:0}),i=0,n=s.diff(t,"hours"),o=e.diff(a,"hours");return n>0&&(i+=n),o>0&&(i+=o),i},staySubtotal:function(){var t=this.state,e=this.invoiceData,s=e.villaNights*t.prices.villaNight,a=0;t.stay.stayNightArray.forEach((function(e,s){a+=e.guests*t.prices.stayNight}));var i=t.stay.pets*e.villaNights*t.prices.petNight,n=e.extraHours*t.prices.extraHour;return s+a+i+n},invoiceTotal:function(){var t=this.state,e=this.invoiceData,s=this.staySubtotal*(1-e.discount)+e.cateringTotal;return t.booking.costs.forEach((function(t,e){"payment"===t.type?s-=t.totalPrice:s+=t.totalPrice})),s},invoiceData:function(){var t=this.state;return{villaNights:t.stay.stayNightArray.length,stayNightArray:t.stay.stayNightArray,extraHours:this.extraHours,discount:t.discountPerNight.hasOwnProperty(t.stay.stayNightArray.length)?t.discountPerNight[t.stay.stayNightArray.length]:.15,cateringTotal:0}}},methods:{hoursDifference:function(t,e){var s=l.a.duration(e.diff(t)),a=s.asHours();return a},getDepositIcon:function(t){return"cheque"===t?"money-check-alt":"cash"===t?"money-bill-wave":"transfer"===t?"exchange-alt":"money-check-alt"},getStatusColor:function(t){return"inquiry"===t?"is-warning":"contract"===t?"is-success":"completed"===t?"is-success":"cancelled"===t?"is-danger":"is-grey"},humanFormatDate:function(t){return l()(t).format("ddd D MMM YYYY")},humanFormatTime:function(t){return l()(t).format("HH:mm")},humanInvoiceDate:function(t){return l.a.unix(t).format("ddd. D MMM.")}},mounted:function(){localStorage.getItem("state")?this.state=JSON.parse(localStorage.getItem("state")):this.state=this.$store.state}},u=c,d=(s("ff80"),s("2877")),p=Object(d["a"])(u,a,i,!1,null,"3244d89e",null);e["a"]=p.exports},"9c0c":function(t,e,s){},b582:function(t,e,s){},c0d6:function(t,e,s){"use strict";var a=s("2b0e"),i=s("2f62"),n=s("c1df"),o=s.n(n);a["a"].use(i["a"]),e["a"]=new i["a"].Store({state:{contact:{email:"",name:"",phone:"",nationality:null},booking:{status:null,source:null,date:null,deposits:[],costs:[],uuid:null},stay:{arrivalDatetime:o()().hour(17).minute(0).toDate(),departureDatetime:o()().hour(14).minute(0).toDate(),baseGuests:10,stayNightArray:[],children:0,guestInfo:"",pets:0},meals:[],prices:{villaNight:100,stayNight:35,petNight:5,taxeSejourNight:1,extraHour:20},discountPerNight:{0:0,1:0,2:0,3:.1,4:.15}},mutations:{},actions:{}})},e788:function(t,e,s){"use strict";var a=s("1193"),i=s.n(a);i.a},ff80:function(t,e,s){"use strict";var a=s("b582"),i=s.n(a);i.a}});
//# sourceMappingURL=index.ded431e3.js.map